<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://mengfanfan.github.io</id>
    <title>å­Ÿé¥­é¥­çš„ç‹¬ç«‹åšå®¢</title>
    <updated>2021-06-08T14:41:24.690Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://mengfanfan.github.io"/>
    <link rel="self" href="https://mengfanfan.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://mengfanfan.github.io/images/avatar.png</logo>
    <icon>https://mengfanfan.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, å­Ÿé¥­é¥­çš„ç‹¬ç«‹åšå®¢</rights>
    <entry>
        <title type="html"><![CDATA[Git Commit Message æäº¤è§„èŒƒé…ç½®è¯´æ˜]]></title>
        <id>https://mengfanfan.github.io/post/git-commit-message-ti-jiao-gui-fan-pei-zhi-shuo-ming/</id>
        <link href="https://mengfanfan.github.io/post/git-commit-message-ti-jiao-gui-fan-pei-zhi-shuo-ming/">
        </link>
        <updated>2020-05-23T06:31:55.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="æè¿°">æè¿°</h2>
<p>é’ˆå¯¹ git commit log æäº¤è§„èŒƒçš„é—®é¢˜ï¼Œéœ€è¦ç»Ÿä¸€è§„èŒƒï¼Œä¸ç„¶å¾ˆå®¹æ˜“é€ æˆè¯¯è§£ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h2 id="æè¿°">æè¿°</h2>
<p>é’ˆå¯¹ git commit log æäº¤è§„èŒƒçš„é—®é¢˜ï¼Œéœ€è¦ç»Ÿä¸€è§„èŒƒï¼Œä¸ç„¶å¾ˆå®¹æ˜“é€ æˆè¯¯è§£ã€‚</p>
<!-- more -->
<h2 id="commitizen-æ›¿ä»£ä½ çš„-git-commit">Commitizen: æ›¿ä»£ä½ çš„ git commit</h2>
<h3 id="å…¨å±€å®‰è£…">å…¨å±€å®‰è£…</h3>
<pre><code>npm install -g commitizen
</code></pre>
<h3 id="é¡¹ç›®çº§å®‰è£…">é¡¹ç›®çº§å®‰è£…</h3>
<pre><code>npm install -D commitizen cz-customizable --dev
</code></pre>
<p><code>package.json</code>ä¸­é…ç½®:</p>
<pre><code>  &quot;config&quot;: {
    &quot;commitizen&quot;: {
      &quot;path&quot;: &quot;node_modules/cz-customizable&quot;
    }
  },
</code></pre>
<h3 id="é…ç½®è§„åˆ™">é…ç½®è§„åˆ™</h3>
<p>.cz-config.js ä¸­å†™å…¥è‡ªå®šä¹‰çš„é…ç½®ï¼š</p>
<pre><code>'use strict'

module.exports = {
  types: [
    {
      value: 'ğŸ’ª WIP',
      name: 'è¿›åº¦: å·¥ä½œè¿›åº¦',
    },
    {
      value: 'âœ¨ feat',
      name: 'åŠŸèƒ½: æ–°åŠŸèƒ½',
    },
    {
      value: 'ğŸ fix',
      name: 'ä¿®å¤: ä¿®å¤bug',
    },
    {
      value: 'ğŸ›  refactor',
      name: 'é‡æ„: ä»£ç é‡æ„',
    },
    {
      value: 'ğŸ“š  docs',
      name: 'æ–‡æ¡£: åªæœ‰æ–‡æ¡£å˜æ›´',
    },
    {
      value: 'ğŸ  test',
      name: 'æµ‹è¯•: æ·»åŠ ä¸€ä¸ªæµ‹è¯•',
    },
    {
      value: 'ğŸ—¯ chore',
      name: 'å·¥å…·: æ²¡æœ‰ä¿®æ”¹æºä»£ç ï¼Œåªæ˜¯å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·ã€‚',
    },
    {
      value: 'ğŸ’… style',
      name: 'æ ·å¼: ç©ºæ ¼ï¼Œåˆ†å·ç­‰æ ¼å¼ä¿®å¤ã€‚',
    },
    {
      value: 'âª revert',
      name: 'å›æ»š: ä»£ç å›é€€ã€‚',
    },
    {
      value: 'ğŸ  perf',
      name: 'æ€§èƒ½: æå‡æ€§èƒ½ã€‚',
    },
    {
      value: 'ğŸ— build',
      name: 'æ„å»º: å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–ï¼ˆä¾‹å¦‚scopes: webpackã€gulpã€npmç­‰ï¼‰',
    },
    {
      value: 'ğŸ•¹ ci',
      name:
        'é›†æˆ: æ›´æ”¹æŒç»­é›†æˆè½¯ä»¶çš„é…ç½®æ–‡ä»¶å’Œpackageä¸­çš„scriptså‘½ä»¤ï¼Œä¾‹å¦‚scopes: Travis, Circleç­‰',
    },
  ],
  scopes: [],
  messages: {
    type: 'é€‰æ‹©ä¸€ç§ä½ çš„æäº¤ç±»å‹:',
    scope: 'é€‰æ‹©ä¸€ä¸ªscope (å¯é€‰):',
    // used if allowCustomScopes is true
    customScope: 'Denote the SCOPE of this change:',
    subject: 'çŸ­è¯´æ˜:\n',
    body: 'é•¿è¯´æ˜ï¼Œä½¿ç”¨&quot;|&quot;æ¢è¡Œ(å¯é€‰)ï¼š\n',
    breaking: 'éå…¼å®¹æ€§è¯´æ˜ (å¯é€‰):\n',
    footer: 'å…³è”å…³é—­çš„issueï¼Œä¾‹å¦‚ï¼š#31, #34(å¯é€‰):\n',
    confirmCommit: 'ç¡®å®šæäº¤è¯´æ˜ï¼Ÿ',
  },
  footerPrefix: 'TAPD: ',
  allowCustomScopes: true,
  allowBreakingChanges: ['ç‰¹æ€§', 'ä¿®å¤'],
  skipQuestions: ['scope', 'body', 'footer'],
}
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://mengfanfan.github.io/post-images/1590216132807.png" alt="" loading="lazy"></figure>
<h3 id="commitlint-æ ¡éªŒä½ çš„-message">Commitlint: æ ¡éªŒä½ çš„ message</h3>
<p>commitlint: å¯ä»¥å¸®åŠ©æˆ‘ä»¬ lint commit messages, å¦‚æœæˆ‘ä»¬æäº¤çš„ä¸ç¬¦åˆæŒ‡å‘çš„è§„èŒƒ, ç›´æ¥æ‹’ç»æäº¤ã€‚</p>
<pre><code>yarn add commitlint-config-cz @commitlint/cli --dev
</code></pre>
<p>.commitlintrc.js ä¸­å†™å…¥:</p>
<pre><code>module.exports = {
  extends: [
    'cz'
  ],
  rules: {
  }
};
</code></pre>
<h3 id="ç»“åˆ-husky">ç»“åˆ Husky</h3>
<p>æ ¡éªŒ commit message çš„æœ€ä½³æ–¹å¼æ˜¯ç»“åˆ git hook, æ‰€ä»¥éœ€è¦é…åˆ Huskyã€‚</p>
<pre><code>npm i husky@next
</code></pre>
<p>package.json ä¸­æ·»åŠ :</p>
<pre><code>&quot;husky&quot;: {
    &quot;hooks&quot;: {
      ...,
      &quot;commit-msg&quot;: &quot;commitlint -e $GIT_PARAMS&quot;
    }
  },
</code></pre>
<p><a href="https://juejin.im/post/5afc5242f265da0b7f44bee4">å‚è€ƒ</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ»¡è¶³å¤§å±åœºæ™¯çš„æ‹–æ‹½ç»„ä»¶åŸç†è¯´æ˜]]></title>
        <id>https://mengfanfan.github.io/post/man-zu-da-ping-chang-jing-de-tuo-zhuai-zu-jian-yuan-li-shuo-ming/</id>
        <link href="https://mengfanfan.github.io/post/man-zu-da-ping-chang-jing-de-tuo-zhuai-zu-jian-yuan-li-shuo-ming/">
        </link>
        <updated>2020-05-22T01:50:31.000Z</updated>
        <summary type="html"><![CDATA[<p>âœï¸ æºäºå¤§å±åœºæ™¯ä¸‹ï¼Œç”±äºè¿›è¡Œé€‚é…é¡µé¢å°ºå¯¸ï¼Œéšç€é¡µé¢å°ºå¯¸çš„é¢‘ç¹å˜åŒ–ï¼Œå¯¼è‡´æ‹–æ‹½ç»„ä»¶çš„å®šä½å¤±æ•ˆï¼Œå¼•èµ·æ‹–æ‹½å¼‚å¸¸......</p>
]]></summary>
        <content type="html"><![CDATA[<p>âœï¸ æºäºå¤§å±åœºæ™¯ä¸‹ï¼Œç”±äºè¿›è¡Œé€‚é…é¡µé¢å°ºå¯¸ï¼Œéšç€é¡µé¢å°ºå¯¸çš„é¢‘ç¹å˜åŒ–ï¼Œå¯¼è‡´æ‹–æ‹½ç»„ä»¶çš„å®šä½å¤±æ•ˆï¼Œå¼•èµ·æ‹–æ‹½å¼‚å¸¸......</p>
<!-- more -->
<h3 id="åœºæ™¯">åœºæ™¯ğŸ¦„</h3>
<p><strong>ç»„ä»¶éœ€è¦æ»¡è¶³åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>åŸºæœ¬PCç«¯æ‹–æ‹½åŠŸèƒ½ï¼›</li>
<li>é€‚é…å±å¹•å°ºå¯¸å˜åŒ–ï¼›</li>
<li>æ”¯æŒä¼ å…¥ç»„ä»¶çš„å®šä½<code>top, left</code>ï¼›ï¼ˆé˜²æ­¢çªå‘æ€§é¡µé¢å°ºå¯¸æ¯”ä¾‹å˜åŒ–ï¼Œæ‹–æ‹½ç»„ä»¶å®šä½å¤±æ•ˆï¼‰</li>
</ul>
<h3 id="æ‹–æ‹½åŸç†">æ‹–æ‹½åŸç†</h3>
<h4 id="æ‰€éœ€äº‹ä»¶">æ‰€éœ€äº‹ä»¶</h4>
<ul>
<li>onMousedown</li>
<li>onMouseup</li>
<li>onMousemove</li>
</ul>
<h4 id="åŸç†è¯´æ˜">åŸç†è¯´æ˜</h4>
<h5 id="åŸç†å›¾">åŸç†å›¾ğŸ¥</h5>
<figure data-type="image" tabindex="1"><img src="https://mengfanfan.github.io/post-images/1590112364894.png" alt="" loading="lazy"></figure>
<h5 id="çŠ¶æ€å‚æ•°">çŠ¶æ€å‚æ•°</h5>
<pre><code>const dragData = 
{
    // xåç§»å€¼
    offsetX: 0,
    // yåç§»å€¼
    offsetY: 0,
    // æ˜¯å¦å¼€å§‹æ‹–æ‹½
    isDrag: false,
    // å½“å‰ç»„ä»¶è·ç¦»å½“å‰çª—å£xè½´çš„è·ç¦»
    distanceX: 0,
    // å½“å‰ç»„ä»¶è·ç¦»å½“å‰çª—å£yè½´çš„è·ç¦»
    distanceY: 0,
    // ç»„ä»¶topå®šä½
    top: 0,
    // ç»„ä»¶leftå®šä½
    left: 0,
}
</code></pre>
<h5 id="æ­¥éª¤">æ­¥éª¤</h5>
<blockquote>
<p>ç¬¬ä¸€æ­¥</p>
</blockquote>
<p>é¼ æ ‡ç§»åŠ¨åˆ°ç»„ä»¶å¯è§¦å‘åŒºåŸŸï¼Œé¼ æ ‡æŒ‰ä¸‹ï¼Œè§¦å‘<code>onMousedown</code>äº‹ä»¶ï¼Œè®°å½•é¼ æ ‡ç‚¹å‡»ä½ç½®ï¼Œå¼€å¯æ‹–åŠ¨</p>
<pre><code>// è®°å½•é¼ æ ‡ç‚¹å‡»ä½ç½®
dragData.distanceX = e.clientX
dragData.distanceY = e.clientY
// å¼€å¯æ‹–åŠ¨
 dragData.isDrag = true
</code></pre>
<blockquote>
<p>ç¬¬äºŒæ­¥</p>
</blockquote>
<p>é¼ æ ‡ç§»åŠ¨ï¼Œè§¦å‘<code>onMousemove</code>äº‹ä»¶ï¼Œåˆ¤æ–­<code>dragData.isDrag</code>æ˜¯å¦ä¸ºçœŸï¼Œä¸ºå‡è·³å‡ºæ‰§è¡Œï¼Œä¸ºçœŸç»§ç»­æ‰§è¡Œã€‚é€šè¿‡è®¡ç®—ç§»åŠ¨çš„è·ç¦»ï¼Œè·å–å½“å‰ç»„ä»¶ä½ç½®ï¼Œç®—å‡ºæœ€æ–°ä½ç½®ï¼Œå¯¹ç»„ä»¶è¿›è¡Œæ›´æ–°ä½ç½®ä¿¡æ¯ã€‚å¹¶è®°å½•å½“å‰ç»„ä»¶è·ç¦»å½“å‰çª—å£çš„è·ç¦»ã€æ­¤æ—¶çš„åç§»ä½ç½®ï¼›</p>
<p><strong>è®¡ç®—ç§»åŠ¨çš„è·ç¦»ï¼š</strong></p>
<p>è®¡ç®—ç§»åŠ¨çš„è·ç¦» = æœ¬æ¬¡è·ç¦»å½“å‰çª—å£ç§»åŠ¨è·ç¦» - ä¸Šæ¬¡è·ç¦»å½“å‰çª—å£ç§»åŠ¨è·ç¦» + ä¸Šä¸€æ¬¡ç§»åŠ¨è·ç¦»</p>
<pre><code>const moveDistanceX = e.clientX - distanceX + offsetX
const moveDistanceY = e.clientY - distanceY + offsetY
</code></pre>
<p><strong>è·å–æœ€æ–°ä½ç½®ï¼š</strong></p>
<p>ä¸å¸¦é¡µé¢ç¼©æ”¾ï¼š</p>
<p>æœ€æ–°ä½ç½® = å½“å‰ç»„ä»¶çš„ä½ç½® + ç§»åŠ¨çš„è·ç¦»</p>
<p>å¸¦é¡µé¢ç¼©æ”¾ï¼š</p>
<p>æœ€æ–°ä½ç½® = å½“å‰ç»„ä»¶çš„ä½ç½® + ç§»åŠ¨çš„è·ç¦»/é¡µé¢ç¼©æ”¾ç³»æ•°</p>
<pre><code>const _left = left + moveDistanceX / scaleX
const _top = top + moveDistanceY / scaleY
</code></pre>
<p><strong>æ›´æ–°ç»„ä»¶ä½ç½®ä¿¡æ¯ï¼š</strong></p>
<pre><code>el.style.left = _left + 'px'
el.style.top = _top + 'px'
</code></pre>
<p><strong>è®°å½•çŠ¶æ€ï¼š</strong></p>
<p>è®°å½•å½“å‰ç»„ä»¶è·ç¦»å½“å‰çª—å£çš„è·ç¦»ï¼š</p>
<pre><code>dragData.distanceX = e.clientX
dragData.distanceY = e.clientY
</code></pre>
<p>è®°å½•å½“å‰åç§»ä½ç½®</p>
<pre><code>dragData.offsetX = moveDistanceX
dragData.offsetY = moveDistanceY
</code></pre>
<blockquote>
<p>ç¬¬ä¸‰æ­¥</p>
</blockquote>
<p>é¼ æ ‡æŠ¬èµ·ï¼Œè§¦å‘<code>onMouseup</code>äº‹ä»¶ï¼Œå…³é—­æ‹–åŠ¨ï¼›</p>
<pre><code>dragData.isDrag = false
</code></pre>
<h3 id="é€‚é…å±å¹•å°ºå¯¸å˜åŒ–">é€‚é…å±å¹•å°ºå¯¸å˜åŒ–</h3>
<h4 id="åœºæ™¯-2">åœºæ™¯</h4>
<p>ç”¨æˆ·æ§åˆ¶å±å¹•ï¼Œä½¿å±å¹•å°ºå¯¸å‘é€å˜åŒ–ï¼Œä½¿æ‹–æ‹½ç»„ä»¶ä¿å­˜çš„å®šä½ä¿¡æ¯è¿‡æœŸï¼Œå¯¼è‡´æ‹–æ‹½å¼‚å¸¸ã€‚</p>
<h4 id="æ‰€éœ€äº‹ä»¶-2">æ‰€éœ€äº‹ä»¶</h4>
<ul>
<li>onResize</li>
</ul>
<h4 id="åŸç†è¯´æ˜-2">åŸç†è¯´æ˜</h4>
<p>å‘<code>window</code>ç»‘å®š<code>resize</code>äº‹ä»¶ï¼Œç›‘æ§é¡µé¢å°ºå¯¸å˜åŒ–ï¼Œå½“å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼Œæˆ–è€…æœ€æ–°ç»„ä»¶å®šä½ï¼Œæ¸…ç©ºä¿å­˜çš„å®šä½çŠ¶æ€ä¿¡æ¯ã€‚</p>
<pre><code>const { left, top } = el.style
const _top = +top.replace(/px/, '')
const _left = +left.replace(/px/, '')
dragData = {
   offsetX: 0,
   offsetY: 0,
   isDrag: false,
   distanceX: 0,
   distanceY: 0,
   top: _top,
   left: _left,
}
</code></pre>
<h3 id="çªå‘æ€§é¡µé¢å°ºå¯¸æ¯”ä¾‹å˜åŒ–å®šä½ä¿®å¤">çªå‘æ€§é¡µé¢å°ºå¯¸æ¯”ä¾‹å˜åŒ–å®šä½ä¿®å¤</h3>
<h4 id="åœºæ™¯-3">åœºæ™¯</h4>
<p>æ²¡æœ‰é€šè¿‡<code>resize</code>äº‹ä»¶è§¦å‘çš„é¡µé¢å°ºå¯¸å˜åŒ–ï¼Œé€šè¿‡ä¿®æ”¹é¡µé¢å®½é«˜ç­‰å¯¼è‡´é¡µé¢å°ºå¯¸å˜åŒ–ï¼Œè¿™æ—¶ç»„ä»¶å®šä½ä¸å‡†ï¼Œéœ€è¦æ¢å¤åŒæ¯”ä¾‹ä¸‹ç»„ä»¶å®šä½ï¼Œå¹¶ä¿è¯ç»„ä»¶æ‹–æ‹½æ— å¼‚å¸¸ã€‚</p>
<h4 id="æ¡ä»¶">æ¡ä»¶</h4>
<p>é¡µé¢åŸå§‹å®½é«˜ï¼Œå˜åŒ–åé¡µé¢å®½é«˜</p>
<h4 id="æ–¹æ¡ˆ">æ–¹æ¡ˆ</h4>
<p>æ ¹æ®é¡µé¢æ¯”ä¾‹ï¼Œè®¡ç®—å‡ºæœ€æ–°ç»„ä»¶ä½ç½®ï¼Œå¯¹ç»„ä»¶è¿›è¡Œæ›´æ–°ä½ç½®ä¿¡æ¯ï¼Œå¹¶æ¸…ç©ºä¿å­˜çš„å®šä½çŠ¶æ€ä¿¡æ¯ã€‚</p>
<p>é¡µé¢æ¯”ä¾‹ = é¡µé¢åŸå§‹å®½é«˜ / å˜åŒ–åé¡µé¢å®½é«˜</p>
<p>æœ€æ–°ç»„ä»¶ä½ç½® = å½“å‰ç»„ä»¶ä½ç½® / é¡µé¢æ¯”ä¾‹</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€è½¬ã€‘7åˆ†é’Ÿç†è§£JSçš„èŠ‚æµã€é˜²æŠ–åŠä½¿ç”¨åœºæ™¯]]></title>
        <id>https://mengfanfan.github.io/post/zhuan-7-fen-zhong-li-jie-js-de-jie-liu-fang-dou-ji-shi-yong-chang-jing/</id>
        <link href="https://mengfanfan.github.io/post/zhuan-7-fen-zhong-li-jie-js-de-jie-liu-fang-dou-ji-shi-yong-chang-jing/">
        </link>
        <updated>2019-06-03T08:25:49.000Z</updated>
        <summary type="html"><![CDATA[<p>æ®è¯´é˜¿é‡Œæœ‰ä¸€é“é¢è¯•é¢˜å°±æ˜¯è°ˆè°ˆå‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–ã€‚ ç³Ÿäº†ï¼Œè¿™å¯è§¦ç¢°åˆ°æˆ‘çš„çŸ¥è¯†ç›²åŒºäº†ï¼Œå¥½åƒå¬ä¹Ÿæ²¡å¬è¿‡è¿™2ä¸ªä¸œè¥¿ï¼Œç—›å®šæ€ç—›ï¼Œèµ¶ç´§å­¦ä¹ å­¦ä¹ ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ®è¯´é˜¿é‡Œæœ‰ä¸€é“é¢è¯•é¢˜å°±æ˜¯è°ˆè°ˆå‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–ã€‚ ç³Ÿäº†ï¼Œè¿™å¯è§¦ç¢°åˆ°æˆ‘çš„çŸ¥è¯†ç›²åŒºäº†ï¼Œå¥½åƒå¬ä¹Ÿæ²¡å¬è¿‡è¿™2ä¸ªä¸œè¥¿ï¼Œç—›å®šæ€ç—›ï¼Œèµ¶ç´§å­¦ä¹ å­¦ä¹ ã€‚</p>
<!-- more -->
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æ®è¯´é˜¿é‡Œæœ‰ä¸€é“é¢è¯•é¢˜å°±æ˜¯è°ˆè°ˆå‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–ã€‚ ç³Ÿäº†ï¼Œè¿™å¯è§¦ç¢°åˆ°æˆ‘çš„çŸ¥è¯†ç›²åŒºäº†ï¼Œå¥½åƒå¬ä¹Ÿæ²¡å¬è¿‡è¿™2ä¸ªä¸œè¥¿ï¼Œç—›å®šæ€ç—›ï¼Œèµ¶ç´§å­¦ä¹ å­¦ä¹ ã€‚here we goï¼</p>
<h2 id="æ¦‚å¿µå’Œä¾‹å­">æ¦‚å¿µå’Œä¾‹å­</h2>
<h4 id="å‡½æ•°é˜²æŠ–debounce">å‡½æ•°é˜²æŠ–(debounce)</h4>
<blockquote>
<p>åœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚</p>
</blockquote>
<p>çœ‹ä¸€ä¸ªï¼ˆæ —å­ï¼‰ï¼š</p>
<pre><code>//æ¨¡æ‹Ÿä¸€æ®µajaxè¯·æ±‚
function ajax(content) {
  console.log('ajax request ' + content)
}

let inputa = document.getElementById('unDebounce')

inputa.addEventListener('keyup', function (e) {
    ajax(e.target.value)
})
</code></pre>
<p>çœ‹ä¸€ä¸‹è¿è¡Œç»“æœï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://user-gold-cdn.xitu.io/2018/9/4/165a252be5c94d6b?imageslim" alt="image" loading="lazy"></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªè¦æŒ‰ä¸‹é”®ç›˜ï¼Œå°±ä¼šè§¦å‘è¿™æ¬¡ajaxè¯·æ±‚ã€‚ä¸ä»…ä»èµ„æºä¸Šæ¥è¯´æ˜¯å¾ˆæµªè´¹çš„è¡Œä¸ºï¼Œè€Œä¸”å®é™…åº”ç”¨ä¸­ï¼Œç”¨æˆ·ä¹Ÿæ˜¯è¾“å‡ºå®Œæ•´çš„å­—ç¬¦åï¼Œæ‰ä¼šè¯·æ±‚ã€‚ä¸‹é¢æˆ‘ä»¬ä¼˜åŒ–ä¸€ä¸‹ï¼š</p>
<pre><code>//æ¨¡æ‹Ÿä¸€æ®µajaxè¯·æ±‚
function ajax(content) {
  console.log('ajax request ' + content)
}

function debounce(fun, delay) {
    return function (args) {
        let that = this
        let _args = args
        clearTimeout(fun.id)
        fun.id = setTimeout(function () {
            fun.call(that, _args)
        }, delay)
    }
}
    
let inputb = document.getElementById('debounce')

let debounceAjax = debounce(ajax, 500)

inputb.addEventListener('keyup', function (e) {
        debounceAjax(e.target.value)
    })
</code></pre>
<p>çœ‹ä¸€ä¸‹è¿è¡Œç»“æœï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://user-gold-cdn.xitu.io/2018/9/4/165a252b4b429b56?imageslim" alt="image" loading="lazy"></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åŠ å…¥äº†é˜²æŠ–ä»¥åï¼Œå½“ä½ åœ¨é¢‘ç¹çš„è¾“å…¥æ—¶ï¼Œå¹¶ä¸ä¼šå‘é€è¯·æ±‚ï¼Œåªæœ‰å½“ä½ åœ¨æŒ‡å®šé—´éš”å†…æ²¡æœ‰è¾“å…¥æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå‡½æ•°ã€‚å¦‚æœåœæ­¢è¾“å…¥ä½†æ˜¯åœ¨æŒ‡å®šé—´éš”å†…åˆè¾“å…¥ï¼Œä¼šé‡æ–°è§¦å‘è®¡æ—¶ã€‚ å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>let biu = function () {
    console.log('biu biu biu',new Date().Format('HH:mm:ss'))
}

let boom = function () {
    console.log('boom boom boom',new Date().Format('HH:mm:ss'))
}


setInterval(debounce(biu,500),1000)
setInterval(debounce(boom,2000),1000)
</code></pre>
<p>çœ‹ä¸€ä¸‹è¿è¡Œç»“æœï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://user-gold-cdn.xitu.io/2018/9/4/165a252b4b809a23?imageslim" alt="image" loading="lazy"></figure>
<p>è¿™ä¸ªä¾‹å­å°±å¾ˆå¥½çš„è§£é‡Šäº†ï¼Œå¦‚æœåœ¨æ—¶é—´é—´éš”å†…æ‰§è¡Œå‡½æ•°ï¼Œä¼šé‡æ–°è§¦å‘è®¡æ—¶ã€‚biuä¼šåœ¨ç¬¬ä¸€æ¬¡1.5sæ‰§è¡Œåï¼Œæ¯éš”1sæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œboomä¸€æ¬¡ä¹Ÿä¸ä¼šæ‰§è¡Œã€‚å› ä¸ºå®ƒçš„æ—¶é—´é—´éš”æ˜¯2sï¼Œè€Œæ‰§è¡Œæ—¶é—´æ˜¯1sï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½ä¼šé‡æ–°è§¦å‘è®¡æ—¶</p>
<blockquote>
<p>ä¸ªäººç†è§£ å‡½æ•°é˜²æŠ–å°±æ˜¯æ³•å¸ˆå‘æŠ€èƒ½çš„æ—¶å€™è¦è¯»æ¡ï¼ŒæŠ€èƒ½è¯»æ¡æ²¡å®Œå†æŒ‰æŠ€èƒ½å°±ä¼šé‡æ–°è¯»æ¡ã€‚</p>
</blockquote>
<h4 id="å‡½æ•°èŠ‚æµthrottle">å‡½æ•°èŠ‚æµ(throttle)</h4>
<blockquote>
<p>è§„å®šåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…è§¦å‘å¤šæ¬¡å‡½æ•°ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚</p>
</blockquote>
<p>çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>function throttle(fun, delay) {
        let last, deferTimer
        return function (args) {
            let that = this
            let _args = arguments
            let now = +new Date()
            if (last &amp;&amp; now &lt; last + delay) {
                clearTimeout(deferTimer)
                deferTimer = setTimeout(function () {
                    last = now
                    fun.apply(that, _args)
                }, delay)
            }else {
                last = now
                fun.apply(that,_args)
            }
        }
    }

    let throttleAjax = throttle(ajax, 1000)

    let inputc = document.getElementById('throttle')
    inputc.addEventListener('keyup', function(e) {
        throttleAjax(e.target.value)
    })
</code></pre>
<p>çœ‹ä¸€ä¸‹è¿è¡Œç»“æœï¼š</p>
<figure data-type="image" tabindex="4"><img src="https://user-gold-cdn.xitu.io/2018/9/4/165a252b4c1a9686?imageslim" alt="image" loading="lazy"></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨ä¸æ–­è¾“å…¥æ—¶ï¼Œajaxä¼šæŒ‰ç…§æˆ‘ä»¬è®¾å®šçš„æ—¶é—´ï¼Œæ¯1sæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<p>ç»“åˆåˆšåˆšbiubiubiuçš„ä¾‹å­ï¼š</p>
<pre><code>    let biubiu = function () {
        console.log('biu biu biu', new Date().Format('HH:mm:ss'))
    }

    setInterval(throttle(biubiu,1000),10)
</code></pre>
<figure data-type="image" tabindex="5"><img src="https://user-gold-cdn.xitu.io/2018/9/4/165a252b46818296?imageslim" alt="image" loading="lazy"></figure>
<p>ä¸ç®¡æˆ‘ä»¬è®¾å®šçš„æ‰§è¡Œæ—¶é—´é—´éš”å¤šå°ï¼Œæ€»æ˜¯1så†…åªæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<blockquote>
<p>ä¸ªäººç†è§£ å‡½æ•°èŠ‚æµå°±æ˜¯fpsæ¸¸æˆçš„å°„é€Ÿï¼Œå°±ç®—ä¸€ç›´æŒ‰ç€é¼ æ ‡å°„å‡»ï¼Œä¹Ÿåªä¼šåœ¨è§„å®šå°„é€Ÿå†…å°„å‡ºå­å¼¹ã€‚</p>
</blockquote>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<ul>
<li>å‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµéƒ½æ˜¯é˜²æ­¢æŸä¸€æ—¶é—´é¢‘ç¹è§¦å‘ï¼Œä½†æ˜¯è¿™ä¸¤å…„å¼Ÿä¹‹é—´çš„åŸç†å´ä¸ä¸€æ ·ã€‚</li>
<li>å‡½æ•°é˜²æŠ–æ˜¯æŸä¸€æ®µæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œå‡½æ•°èŠ‚æµæ˜¯é—´éš”æ—¶é—´æ‰§è¡Œã€‚</li>
</ul>
<h4 id="ç»“åˆåº”ç”¨åœºæ™¯">ç»“åˆåº”ç”¨åœºæ™¯</h4>
<ol>
<li>
<p>ebounce</p>
<ul>
<li>searchæœç´¢è”æƒ³ï¼Œç”¨æˆ·åœ¨ä¸æ–­è¾“å…¥å€¼æ—¶ï¼Œç”¨é˜²æŠ–æ¥èŠ‚çº¦è¯·æ±‚èµ„æºã€‚<br>
*windowè§¦å‘resizeçš„æ—¶å€™ï¼Œä¸æ–­çš„è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ä¼šä¸æ–­çš„è§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œç”¨é˜²æŠ–æ¥è®©å…¶åªè§¦å‘ä¸€æ¬¡</li>
</ul>
</li>
<li>
<p>throttle</p>
<ul>
<li>é¼ æ ‡ä¸æ–­ç‚¹å‡»è§¦å‘ï¼Œmousedown(å•ä½æ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡)</li>
<li>ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ¯”å¦‚æ˜¯å¦æ»‘åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šï¼Œç”¨throttleæ¥åˆ¤æ–­</li>
</ul>
</li>
</ol>
<p><em>è½¬è½½ï¼šä½œè€…ï¼šè–„è·å‰ç«¯<br>
<a href="https://juejin.im/post/5b8de829f265da43623c4261">é“¾æ¥</a></em></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€è½¬ã€‘160è¡Œä»£ç ä»¿Vueå®ç°æç®€åŒå‘ç»‘å®š]]></title>
        <id>https://mengfanfan.github.io/post/zhuan-160-xing-dai-ma-fang-vue-shi-xian-ji-jian-shuang-xiang-bang-ding/</id>
        <link href="https://mengfanfan.github.io/post/zhuan-160-xing-dai-ma-fang-vue-shi-xian-ji-jian-shuang-xiang-bang-ding/">
        </link>
        <updated>2019-05-22T08:26:17.000Z</updated>
        <summary type="html"><![CDATA[<p>ç²¾ç®€vueåŒå‘ç»‘å®šæœºåˆ¶ï¼Œå¯¹äºæ²¡æœ‰å¥½å¥½ç ”ç©¶è¿‡è¿™æ–¹é¢çŸ¥è¯†çš„åŒå­¦æ¥è¯´ï¼Œå½“ç„¶æ˜¯å¾ˆéš¾çš„ï¼Œæ¥ä¸‹æ¥æœ¬æ–‡ç”¨160è¡Œä»£ç å¸¦ä½ å®ç°ä¸€ä¸ªæç®€çš„åŒå‘ç»‘å®šæœºåˆ¶ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ç²¾ç®€vueåŒå‘ç»‘å®šæœºåˆ¶ï¼Œå¯¹äºæ²¡æœ‰å¥½å¥½ç ”ç©¶è¿‡è¿™æ–¹é¢çŸ¥è¯†çš„åŒå­¦æ¥è¯´ï¼Œå½“ç„¶æ˜¯å¾ˆéš¾çš„ï¼Œæ¥ä¸‹æ¥æœ¬æ–‡ç”¨160è¡Œä»£ç å¸¦ä½ å®ç°ä¸€ä¸ªæç®€çš„åŒå‘ç»‘å®šæœºåˆ¶ã€‚</p>
<!-- more -->
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ç°åœ¨çš„å‰ç«¯é¢è¯•ä¸ç®¡ä½ ç”¨çš„ä»€ä¹ˆæ¡†æ¶ï¼Œæ€»ä¼šé—®ä½ è¿™ä¸ªæ¡†æ¶çš„åŒå‘ç»‘å®šæœºåˆ¶ï¼Œæœ‰çš„ç”šè‡³è¦æ±‚ä½ ç°åœºå®ç°ä¸€ä¸ªåŒå‘ç»‘å®šå‡ºæ¥ï¼Œé‚£å¯¹äºæ²¡æœ‰å¥½å¥½ç ”ç©¶è¿‡è¿™æ–¹é¢çŸ¥è¯†çš„åŒå­¦æ¥è¯´ï¼Œå½“ç„¶æ˜¯å¾ˆéš¾çš„ï¼Œæ¥ä¸‹æ¥æœ¬æ–‡ç”¨160è¡Œä»£ç å¸¦ä½ å®ç°ä¸€ä¸ªæç®€çš„åŒå‘ç»‘å®šæœºåˆ¶ã€‚</p>
<h2 id="æ•ˆæœgif">æ•ˆæœGIFï¼š</h2>
<figure data-type="image" tabindex="1"><img src="https://user-gold-cdn.xitu.io/2018/6/23/1642bc39f2604b1c?imageslim" alt="image" loading="lazy"></figure>
<h2 id="äº†è§£objectdefineproperty">äº†è§£Object.defineProperty()ï¼š</h2>
<p>è¿™ä¸ªAPIæ˜¯å®ç°åŒå‘ç»‘å®šçš„æ ¸å¿ƒï¼Œæœ€ä¸»è¦çš„ä½œç”¨æ˜¯é‡å†™æ•°æ®çš„<code>get</code>ã€<code>set</code>æ–¹æ³•ã€‚</p>
<h3 id="ä½¿ç”¨æ–¹å¼">ä½¿ç”¨æ–¹å¼ï¼š</h3>
<pre><code>    let obj = {
      singer: &quot;å‘¨æ°ä¼¦&quot;
    };
    let value = &quot;é’èŠ±ç“·&quot;;
    Object.defineProperty(obj, &quot;music&quot;, {
      // value: 'ä¸ƒé‡Œé¦™', // è®¾ç½®å±æ€§çš„å€¼ ä¸‹é¢è®¾ç½®äº†get setå‡½æ•° æ‰€ä»¥è¿™é‡Œä¸èƒ½è®¾ç½®
      configurable: false, // æ˜¯å¦å¯ä»¥åˆ é™¤å±æ€§ é»˜è®¤ä¸èƒ½åˆ é™¤
      // writable: true,  // æ˜¯å¦å¯ä»¥ä¿®æ”¹å¯¹è±¡ ä¸‹é¢è®¾ç½®äº†get setå‡½æ•° æ‰€ä»¥è¿™é‡Œä¸èƒ½è®¾ç½®
      enumerable: true, // musicæ˜¯å¦å¯ä»¥è¢«æšä¸¾ é»˜è®¤æ˜¯ä¸èƒ½è¢«æšä¸¾(éå†)
      // â˜† get,setè®¾ç½®æ—¶ä¸èƒ½è®¾ç½®writableå’Œvalueï¼Œè¦ä¸€å¯¹ä¸€å¯¹è®¾ç½®ï¼Œäº¤å‰è®¾ç½®/åŒæ—¶å­˜åœ¨ å°±ä¼šæŠ¥é”™
      get() {
        // è·å–obj.musicçš„æ—¶å€™å°±ä¼šè°ƒç”¨getæ–¹æ³•
        // let value = &quot;å¼ºè¡Œè®¾ç½®getçš„è¿”å›å€¼&quot;; // æ‰“å¼€æ³¨é‡Š è¯»å–å±æ€§æ°¸è¿œéƒ½æ˜¯â€˜å¼ºè¡Œè®¾ç½®getçš„è¿”å›å€¼â€™
        return value;
      },
      set(val) {
        // å°†ä¿®æ”¹çš„å€¼é‡æ–°èµ‹ç»™song
        value = val;
      }
    });
    console.log(obj.music); // é’èŠ±ç“·
    delete obj.music; // configurableè®¾ä¸ºfalse åˆ é™¤æ— æ•ˆ
    console.log(obj.music); // é’èŠ±ç“·
    obj.music = &quot;å¬å¦ˆå¦ˆçš„è¯&quot;; 
    console.log(obj.music); // å¬å¦ˆå¦ˆçš„è¯
    for (let key in obj) {
      // é»˜è®¤æƒ…å†µä¸‹é€šè¿‡`defineProperty`å®šä¹‰çš„å±æ€§æ˜¯ä¸èƒ½è¢«æšä¸¾(éå†)çš„
      // éœ€è¦è®¾ç½®enumerableä¸ºtrueæ‰å¯ä»¥ å¦åˆ™åªèƒ½æ‹¿åˆ°singer å±æ€§
      console.log(key); // singer, music
    }
</code></pre>
<h3 id="ç”»ä¸€ä¸‹é‡ç‚¹">ç”»ä¸€ä¸‹é‡ç‚¹ï¼š</h3>
<ul>
<li>get,setè®¾ç½®æ—¶ä¸èƒ½è®¾ç½®writableå’Œvalue, ä»–ä»¬æ˜¯ä¸€å¯¹æƒ…ä¾£çš„å­˜åœ¨ï¼Œäº¤å‰è®¾ç½®æˆ–åŒæ—¶å­˜åœ¨,ä¼šæŠ¥é”™</li>
<li>é€šè¿‡definePropertyè®¾ç½®çš„å±æ€§ï¼Œé»˜è®¤ä¸èƒ½åˆ é™¤ï¼Œä¸èƒ½éå†ï¼Œå½“ç„¶ä½ å¯ä»¥é€šè¿‡è®¾ç½®æ›´æ”¹ä»–ä»¬ã€‚</li>
<li>getã€set æ˜¯å‡½æ•°ï¼Œå¯ä»¥åšçš„äº‹æƒ…å¾ˆå¤šã€‚</li>
</ul>
<p><strong>å…¼å®¹æ€§ï¼š</strong> IE 9,Firefox 4, Chorme 5,Opera 11.6,Safari 5.1</p>
<h2 id="å®ç°æ€è·¯">å®ç°æ€è·¯ï¼š</h2>
<h3 id="mvvmç³»åˆ—çš„åŒå‘ç»‘å®šå…³é”®æ­¥éª¤">mvvmç³»åˆ—çš„åŒå‘ç»‘å®šï¼Œå…³é”®æ­¥éª¤ï¼š</h3>
<ol>
<li>å®ç°æ•°æ®ç›‘å¬å™¨Observerï¼Œç”¨<code>Object.defineProperty()</code><strong>é‡å†™æ•°æ®çš„getã€setï¼Œå€¼æ›´æ–°å°±åœ¨setä¸­é€šçŸ¥è®¢é˜…è€…æ›´æ–°æ•°æ®</strong>ã€‚</li>
<li>å®ç°æ¨¡æ¿ç¼–è¯‘Compileï¼Œæ·±åº¦éå†domæ ‘ï¼Œå¯¹æ¯ä¸ªå…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤æ¨¡æ¿è¿›è¡Œ<strong>æ›¿æ¢æ•°æ®ä»¥åŠè®¢é˜…æ•°æ®</strong>ã€‚</li>
<li>å®ç°Watchç”¨äºè¿æ¥Observerå’ŒCompileï¼Œ<strong>èƒ½å¤Ÿè®¢é˜…å¹¶æ”¶åˆ°æ¯ä¸ªå±æ€§å˜åŠ¨çš„é€šçŸ¥ï¼Œæ‰§è¡ŒæŒ‡ä»¤ç»‘å®šçš„ç›¸åº”å›è°ƒå‡½æ•°ï¼Œä»è€Œæ›´æ–°è§†å›¾</strong>ã€‚</li>
<li>mvvmå…¥å£å‡½æ•°ï¼Œæ•´åˆä»¥ä¸Šä¸‰è€…ã€‚</li>
</ol>
<h3 id="æµç¨‹å›¾">æµç¨‹å›¾ï¼š</h3>
<figure data-type="image" tabindex="2"><img src="https://user-gold-cdn.xitu.io/2018/6/23/1642bcf24d35456f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image" loading="lazy"></figure>
<h2 id="å…·ä½“ä»£ç å®ç°">å…·ä½“ä»£ç å®ç°ï¼š</h2>
<h3 id="htmlç»“æ„">htmlç»“æ„ï¼š</h3>
<pre><code>&lt;div id=&quot;app&quot;&gt;
    &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;
    &lt;h3 v-bind=&quot;name&quot;&gt;&lt;/h3&gt;
    &lt;input type=&quot;text&quot; v-model=&quot;testData1&quot;&gt;
    &lt;h3&gt;{{ testData1 }}&lt;/h3&gt;
    &lt;input type=&quot;text&quot; v-model=&quot;testData2&quot;&gt;
    &lt;h3&gt;{{ testData2 }}&lt;/h3&gt;
&lt;/div&gt;
</code></pre>
<h3 id="è°ƒç”¨æ–¹æ³•">è°ƒç”¨æ–¹æ³•ï¼š</h3>
<p>é‡‡ç”¨ç±»Vueæ–¹å¼æ¥ä½¿ç”¨åŒå‘ç»‘å®šï¼š</p>
<pre><code> window.onload = function () {
    var app = new myVue({
        el: '#app', // dom
        data: { // æ•°æ®
            testData1: 'ä»¿Vue',
            testData2: 'æç®€åŒå‘ç»‘å®š',
            name: 'OBKoro1'
        }
    })
}
</code></pre>
<h3 id="åˆ›å»ºmyvueå‡½æ•°">åˆ›å»ºmyVueå‡½æ•°ï¼š</h3>
<p>å®é™…ä¸Šè¿™é‡Œæ˜¯æˆ‘ä»¬å®ç°æ€è·¯ä¸­çš„ç¬¬å››æ­¥ï¼Œç”¨äºæ•´åˆæ•°æ®ç›‘å¬å™¨<code>this._observer()</code>ã€æŒ‡ä»¤è§£æå™¨<code>this._compile()</code>ä»¥åŠè¿æ¥Observerå’ŒCompileçš„_watcherTplçš„watchæ± ã€‚</p>
<pre><code>    function myVue(options = {}) {  // é˜²æ­¢æ²¡ä¼ ï¼Œè®¾ä¸€ä¸ªé»˜è®¤å€¼
        this.$options = options; // é…ç½®æŒ‚è½½
        this.$el = document.querySelector(options.el); // è·å–dom
        this._data = options.data; // æ•°æ®æŒ‚è½½
        this._watcherTpl = {}; // watcheræ± 
        this._observer(this._data); // ä¼ å…¥æ•°æ®ï¼Œæ‰§è¡Œå‡½æ•°ï¼Œé‡å†™æ•°æ®çš„get set
        this._compile(this.$el); // ä¼ å…¥domï¼Œæ‰§è¡Œå‡½æ•°ï¼Œç¼–è¯‘æ¨¡æ¿ å‘å¸ƒè®¢é˜…
    };
</code></pre>
<h3 id="watcherå‡½æ•°">Watcherå‡½æ•°:</h3>
<p>è¿™æ˜¯å®ç°æ€è·¯ä¸­çš„ç¬¬ä¸‰æ­¥ï¼Œå› ä¸ºä¸‹æ–¹æ•°æ®ç›‘å¬å™¨_observer()éœ€è¦ç”¨åˆ°Watcherå‡½æ•°ï¼Œæ‰€ä»¥è¿™é‡Œå°±å…ˆè®²äº†ã€‚</p>
<p>åƒå®ç°æ€è·¯ä¸­æ‰€è¯´çš„ï¼Œè¿™é‡Œèµ·åˆ°äº†è¿æ¥Observerå’ŒCompileçš„ä½œç”¨ï¼š</p>
<ol>
<li><strong>åœ¨æ¨¡æ¿ç¼–è¯‘_compile()é˜¶æ®µå‘å¸ƒè®¢é˜…</strong></li>
<li><strong>åœ¨èµ‹å€¼æ“ä½œçš„æ—¶å€™ï¼Œæ›´æ–°è§†å›¾</strong></li>
</ol>
<pre><code> // new Watcher() ä¸ºthis._compile()å‘å¸ƒè®¢é˜…+ åœ¨this._observer()ä¸­set(èµ‹å€¼)çš„æ—¶å€™æ›´æ–°è§†å›¾
 function Watcher(el, vm, val, attr) {
     this.el = el; // æŒ‡ä»¤å¯¹åº”çš„DOMå…ƒç´ 
     this.vm = vm; // myVueå®ä¾‹
     this.val = val; // æŒ‡ä»¤å¯¹åº”çš„å€¼ 
     this.attr = attr; // domè·å–å€¼ï¼Œå¦‚valueè·å–inputçš„å€¼ / innerHTMLè·å–domçš„å€¼
     this.update(); // æ›´æ–°è§†å›¾
 }
 Watcher.prototype.update = function () { 
     this.el[this.attr] = this.vm._data[this.val]; // è·å–dataçš„æœ€æ–°å€¼ èµ‹å€¼ç»™dom æ›´æ–°è§†å›¾
 }
</code></pre>
<p>æ²¡æœ‰çœ‹é”™ï¼Œä»£ç é‡å°±è¿™ä¹ˆå¤šï¼Œå¯èƒ½éœ€è¦æŠŠæ•´ä¸ªä»£ç è¿æ¥èµ·æ¥ï¼Œå¤šçœ‹å‡ éæ‰èƒ½å¤Ÿç†è§£ã€‚</p>
<h3 id="å®ç°æ•°æ®ç›‘å¬å™¨_observer">å®ç°æ•°æ®ç›‘å¬å™¨_observer()ï¼š</h3>
<p>å®ç°æ€è·¯ä¸­çš„ç¬¬ä¸€æ­¥ï¼Œç”¨<code>Object.defineProperty()</code>éå†dataé‡å†™æ‰€æœ‰å±æ€§çš„get setã€‚</p>
<p>ç„¶ååœ¨ç»™å¯¹è±¡çš„æŸä¸ªå±æ€§èµ‹å€¼çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘setã€‚</p>
<p><strong>åœ¨setä¸­æˆ‘ä»¬å¯ä»¥ç›‘å¬åˆ°æ•°æ®çš„å˜åŒ–ï¼Œç„¶åå°±å¯ä»¥è§¦å‘watchæ›´æ–°è§†å›¾ã€‚</strong></p>
<pre><code> myVue.prototype._observer = function (obj) {
        var _this = this;
        Object.keys(obj).forEach(key =&gt; { // éå†æ•°æ®
            _this._watcherTpl[key] = { // æ¯ä¸ªæ•°æ®çš„è®¢é˜…æ± ()
                _directives: []
            };
            var value = obj[key]; // è·å–å±æ€§å€¼
            var watcherTpl = _this._watcherTpl[key]; // æ•°æ®çš„è®¢é˜…æ± 
            Object.defineProperty(_this._data, key, { // åŒå‘ç»‘å®šæœ€é‡è¦çš„éƒ¨åˆ† é‡å†™æ•°æ®çš„set get
                configurable: true,  // å¯ä»¥åˆ é™¤
                enumerable: true, // å¯ä»¥éå†
                get() {
                    console.log(`${key}è·å–å€¼ï¼š${value}`);
                    return value; // è·å–å€¼çš„æ—¶å€™ ç›´æ¥è¿”å›
                },
                set(newVal) { // æ”¹å˜å€¼çš„æ—¶å€™ è§¦å‘set
                    console.log(`${key}æ›´æ–°ï¼š${newVal}`);
                    if (value !== newVal) {
                        value = newVal;
                        watcherTpl._directives.forEach((item) =&gt; { // éå†è®¢é˜…æ±  
                            item.update();
                            // éå†æ‰€æœ‰è®¢é˜…çš„åœ°æ–¹(v-model+v-bind+{{}}) è§¦å‘this._compile()ä¸­å‘å¸ƒçš„è®¢é˜…Watcher æ›´æ–°è§†å›¾  
                        });
                    }
                }
            })
        });
    }
</code></pre>
<h3 id="å®ç°compile-æ¨¡æ¿ç¼–è¯‘">å®ç°Compile æ¨¡æ¿ç¼–è¯‘</h3>
<p>è¿™é‡Œæ˜¯å®ç°æ€è·¯ä¸­çš„ç¬¬ä¸‰æ­¥ï¼Œè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹è¿™é‡Œåšäº†å“ªäº›äº‹æƒ…ï¼š</p>
<ul>
<li>
<p>é¦–å…ˆæ˜¯æ·±åº¦éå†domæ ‘ï¼Œéå†æ¯ä¸ªèŠ‚ç‚¹ä»¥åŠå­èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>å°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œåˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ã€‚</p>
</li>
<li>
<p>æŠŠæŒ‡ä»¤ç»‘å®šçš„å±æ€§æ·»åŠ åˆ°å¯¹åº”çš„è®¢é˜…æ± ä¸­</p>
</li>
<li>
<p>ä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§†å›¾ã€‚</p>
</li>
</ul>
<pre><code>  myVue.prototype._compile = function (el) {
      var _this = this, nodes = el.children; // è·å–appçš„dom
      for (var i = 0, len = nodes.length; i &lt; len; i++) { // éå†domèŠ‚ç‚¹
          var node = nodes[i];
          if (node.children.length) {
              _this._compile(node);  // é€’å½’æ·±åº¦éå† domæ ‘
          }
          // å¦‚æœæœ‰v-modelå±æ€§ï¼Œå¹¶ä¸”å…ƒç´ æ˜¯INPUTæˆ–è€…TEXTAREAï¼Œæˆ‘ä»¬ç›‘å¬å®ƒçš„inputäº‹ä»¶    
          if (node.hasAttribute('v-model') &amp;&amp; (node.tagName = 'INPUT' || node.tagName == 'TEXTAREA')) {
              node.addEventListener('input', (function (key) {
                  var attVal = node.getAttribute('v-model'); // è·å–v-modelç»‘å®šçš„å€¼
                  _this._watcherTpl[attVal]._directives.push(new Watcher( // å°†domæ›¿æ¢æˆå±æ€§çš„æ•°æ®å¹¶å‘å¸ƒè®¢é˜… åœ¨setçš„æ—¶å€™æ›´æ–°æ•°æ®
                      node,
                      _this,
                      attVal,
                      'value'
                  ));
                  return function () {
                      _this._data[attVal] = nodes[key].value;  // inputå€¼æ”¹å˜çš„æ—¶å€™ å°†æ–°å€¼èµ‹ç»™æ•°æ® è§¦å‘set=&gt;setè§¦å‘watch æ›´æ–°è§†å›¾
                  }
              })(i));
          }
          if (node.hasAttribute('v-bind')) { // v-bindæŒ‡ä»¤ 
              var attrVal = node.getAttribute('v-bind'); // ç»‘å®šçš„data
              _this._watcherTpl[attrVal]._directives.push(new Watcher( // å°†domæ›¿æ¢æˆå±æ€§çš„æ•°æ®å¹¶å‘å¸ƒè®¢é˜… åœ¨setçš„æ—¶å€™æ›´æ–°æ•°æ®
                  node,
                  _this,
                  attrVal,
                  'innerHTML'
              ))
          }
          var reg = /\{\{\s*([^}]+\S)\s*\}\}/g, txt = node.textContent;   // æ­£åˆ™åŒ¹é…{{}}
          if (reg.test(txt)) {
              node.textContent = txt.replace(reg, (matched, placeholder) =&gt; {
                  // matchedåŒ¹é…çš„æ–‡æœ¬èŠ‚ç‚¹åŒ…æ‹¬{{}}, placeholder æ˜¯{{}}ä¸­é—´çš„å±æ€§å
                  var getName = _this._watcherTpl; // æ‰€æœ‰ç»‘å®šwatchçš„æ•°æ®
                  getName = getName[placeholder];  // è·å–å¯¹åº”watch æ•°æ®çš„å€¼
                  if (!getName._directives) { // æ²¡æœ‰äº‹ä»¶æ±  åˆ›å»ºäº‹ä»¶æ± 
                      getName._directives = [];
                  }
                  getName._directives.push(new Watcher( // å°†domæ›¿æ¢æˆå±æ€§çš„æ•°æ®å¹¶å‘å¸ƒè®¢é˜… åœ¨setçš„æ—¶å€™æ›´æ–°æ•°æ®
                      node,
                      _this,
                      placeholder,
                      'innerHTML'
                  ));
                  return placeholder.split('.').reduce((val, key) =&gt; {
                      return _this._data[key]; // è·å–æ•°æ®çš„å€¼ è§¦å‘get è¿”å›å½“å‰å€¼ 
                  }, _this.$el);
              });
          }
      }
  }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[vueåŸºäºhls.jsçš„æµåª’ä½“ç›´æ’­åŸºæœ¬ç”¨æ³•]]></title>
        <id>https://mengfanfan.github.io/post/vue-ji-yu-hlsjs-de-liu-mei-ti-zhi-bo-ji-ben-yong-fa/</id>
        <link href="https://mengfanfan.github.io/post/vue-ji-yu-hlsjs-de-liu-mei-ti-zhi-bo-ji-ben-yong-fa/">
        </link>
        <updated>2019-03-04T08:29:50.000Z</updated>
        <summary type="html"><![CDATA[<p>hls.jsæ˜¯ä¸€ä¸ªå®ç°HTTP Live Streamingå®¢æˆ·ç«¯çš„JavaScriptåº“ã€‚æœ¬ç¯‡ä¸»è¦ä»‹ç»è¯¥æ’ä»¶çš„åœ¨vueä¸­åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>hls.jsæ˜¯ä¸€ä¸ªå®ç°HTTP Live Streamingå®¢æˆ·ç«¯çš„JavaScriptåº“ã€‚æœ¬ç¯‡ä¸»è¦ä»‹ç»è¯¥æ’ä»¶çš„åœ¨vueä¸­åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</p>
<!-- more -->
<h2 id="hlsjs-ä»‹ç»">hls.js ä»‹ç»</h2>
<p><a href="https://github.com/video-dev/hls.js">hls.js</a>æ˜¯ä¸€ä¸ªå®ç°HTTP Live Streamingå®¢æˆ·ç«¯çš„JavaScriptåº“ã€‚å®ƒä¾é HTML5è§†é¢‘å’ŒMediaSourceæ‰©å±•è¿›è¡Œæ’­æ”¾ã€‚</p>
<p>å®ƒçš„å·¥ä½œåŸç†æ˜¯å°†MPEG-2ä¼ è¾“æµå’ŒAAC / MP3æµè½¬æ¢ä¸ºISO BMFFï¼ˆMP4ï¼‰ç‰‡æ®µã€‚å¦‚æœåœ¨æµè§ˆå™¨ä¸­å¯ç”¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Web Workerå¼‚æ­¥æ‰§è¡Œæ­¤ä¼ è¾“ã€‚<code>hls.js</code>ä¹Ÿæ”¯æŒ<code>HLS+fmp4</code>ï¼Œæ­£å¦‚åœ¨<code>WWDC2016</code>æœŸé—´å®£å¸ƒçš„é‚£æ ·<code>hls.js</code>ä¸éœ€è¦ä»»ä½•æ’­æ”¾å™¨ï¼Œå®ƒç›´æ¥åœ¨æ ‡å‡†çš„HTML <code>&lt;video&gt;</code>å…ƒç´ ä¹‹ä¸Šå·¥ä½œã€‚<code>hls.js</code> ä½¿ç”¨<code>ECMAScript6</code>ç¼–å†™ï¼Œä½¿ç”¨<code>Babel</code>åœ¨<code>ECMAScript5</code>ä¸­ç¼–è¯‘ã€‚</p>
<h2 id="åŸºæœ¬å…¥é—¨">åŸºæœ¬å…¥é—¨</h2>
<pre><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;!-- Or if you want a more recent canary version --&gt;
&lt;!-- &lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@canary&quot;&gt;&lt;/script&gt; --&gt;
&lt;video id=&quot;video&quot;&gt;&lt;/video&gt;
&lt;script&gt;
  var video = document.getElementById('video');
  if(Hls.isSupported()) {
    var hls = new Hls();
    hls.loadSource('https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8');
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,function() {
      video.play();
  });
 }
 // hls.js is not supported on platforms that do not have Media Source Extensions (MSE) enabled.
 // When the browser has built-in HLS support (check using `canPlayType`), we can provide an HLS manifest (i.e. .m3u8 URL) directly to the video element throught the `src` property.
 // This is using the built-in support of the plain video element, without using hls.js.
 // Note: it would be more normal to wait on the 'canplay' event below however on Safari (where you are most likely to find built-in HLS support) the video.src URL must be on the user-driven
 // white-list before a 'canplay' event will be emitted; the last video event that can be reliably listened-for when the URL is not on the white-list is 'loadedmetadata'.
  else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = 'https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8';
    video.addEventListener('loadedmetadata',function() {
      video.play();
    });
  }
&lt;/script&gt;
</code></pre>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>è¦ä¹ˆç›´æ¥åŒ…å«dist / hls.jsæˆ–dist / hls.min.js</p>
<p>æˆ–è€…è¾“å…¥</p>
<pre><code>npm install --save hls.js
</code></pre>
<p>å¯ä»¥é€‰æ‹©æœ‰ä¸€ä¸ªå£°æ˜æ–‡ä»¶å¯ç”¨äºå¸®åŠ©å®Œæˆä»£ç å¹¶åœ¨hls.js apiçš„IDEä¸­æç¤º</p>
<pre><code>npm install --save-dev @ types / hls.js
</code></pre>
<p>npmæ–¹å¼æ—¶ï¼Œåœ¨.vueç»„ä»¶ä¸­å¼•å…¥</p>
<pre><code> var Hls = require('hls.js/dist/hls');
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>åœ¨vueç»„ä»¶ä¸­å£°æ˜hlså®ä¾‹<code>new Hls()</code>,ä¸€å®šè¦åœ¨ç»„ä»¶é”€æ¯å‰æ³¨é”€hlså®ä¾‹ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼ˆéƒ½æ˜¯å‘å‡ºæ¥çš„o(â•¥ï¹â•¥)oï¼‰</p>
<pre><code>beforeDestroy() {
    // æ³¨é”€hls å®ä¾‹
    this.hls.destroy();
},
</code></pre>
<h2 id="åŸºæœ¬apiç”¨æ³•">åŸºæœ¬apiç”¨æ³•</h2>
<blockquote>
<p>loadSource(url)</p>
</blockquote>
<p>ç”¨äºåŠ è½½.m3u8æ–‡ä»¶è·¯å¾„ {string} urlï¼›</p>
<blockquote>
<p>attachMedia()</p>
</blockquote>
<p>æŒ‚è½½mediaå…ƒç´ ï¼›</p>
<blockquote>
<p>destroy()</p>
</blockquote>
<p>æ³¨é”€å®ä¾‹;</p>
<blockquote>
<p>detachMedia()</p>
</blockquote>
<p>Detach from the media;</p>
<blockquote>
<p>startLoad()</p>
</blockquote>
<p>Start loading data from the stream source.Depending on default config, client starts loading automatically when a source is set.</p>
<blockquote>
<p>stopLoad()</p>
</blockquote>
<p>Stop loading of any stream data.</p>
<blockquote>
<p>swapAudioCodec()</p>
</blockquote>
<p>Swap through possible audio codecs in the stream (for example to switch from stereo to 5.1)</p>
<blockquote>
<p>recoverMediaError()</p>
</blockquote>
<p>When the media-element fails, this allows to detach and then re-attach it as one call (convenience method).</p>
<h2 id="å¸¸è§„äº‹ä»¶">å¸¸è§„äº‹ä»¶</h2>
<blockquote>
<p>ERROR</p>
</blockquote>
<p>å«ä¹‰ï¼šhlsçš„é”™è¯¯äº‹ä»¶ã€‚<br>
ä½¿ç”¨æ–¹æ³•ï¼š</p>
<pre><code>this.hls = new Hls();
this.hls.on(Hls.Events.ERROR, (data) =&gt; {
    do something~~        
});
</code></pre>
<blockquote>
<p>å…¶å®ƒäº‹ä»¶ä»‹ç»</p>
</blockquote>
<pre><code>  // fired before MediaSource is attaching to media element - data: { media }
  MEDIA_ATTACHING: 'hlsMediaAttaching',
  // fired when MediaSource has been succesfully attached to media element - data: { }
  MEDIA_ATTACHED: 'hlsMediaAttached',
  // fired before detaching MediaSource from media element - data: { }
  MEDIA_DETACHING: 'hlsMediaDetaching',
  // fired when MediaSource has been detached from media element - data: { }
  MEDIA_DETACHED: 'hlsMediaDetached',
  // fired when we buffer is going to be reset - data: { }
  BUFFER_RESET: 'hlsBufferReset',
  // fired when we know about the codecs that we need buffers for to push into - data: {tracks : { container, codec, levelCodec, initSegment, metadata }}
  BUFFER_CODECS: 'hlsBufferCodecs',
  // fired when sourcebuffers have been created - data: { tracks : tracks }
  BUFFER_CREATED: 'hlsBufferCreated',
  // fired when we append a segment to the buffer - data: { segment: segment object }
  BUFFER_APPENDING: 'hlsBufferAppending',
  // fired when we are done with appending a media segment to the buffer - data : { parent : segment parent that triggered BUFFER_APPENDING, pending : nb of segments waiting for appending for this segment parent}
  BUFFER_APPENDED: 'hlsBufferAppended',
  // fired when the stream is finished and we want to notify the media buffer that there will be no more data - data: { }
  BUFFER_EOS: 'hlsBufferEos',
  // fired when the media buffer should be flushed - data { startOffset, endOffset }
  BUFFER_FLUSHING: 'hlsBufferFlushing',
  // fired when the media buffer has been flushed - data: { }
  BUFFER_FLUSHED: 'hlsBufferFlushed',
  // fired to signal that a manifest loading starts - data: { url : manifestURL}
  MANIFEST_LOADING: 'hlsManifestLoading',
  // fired after manifest has been loaded - data: { levels : [available quality levels], audioTracks : [ available audio tracks], url : manifestURL, stats : { trequest, tfirst, tload, mtime}}
  MANIFEST_LOADED: 'hlsManifestLoaded',
  // fired after manifest has been parsed - data: { levels : [available quality levels], firstLevel : index of first quality level appearing in Manifest}
  MANIFEST_PARSED: 'hlsManifestParsed',
  // fired when a level switch is requested - data: { level : id of new level }
  LEVEL_SWITCHING: 'hlsLevelSwitching',
  // fired when a level switch is effective - data: { level : id of new level }
  LEVEL_SWITCHED: 'hlsLevelSwitched',
  // fired when a level playlist loading starts - data: { url : level URL, level : id of level being loaded}
  LEVEL_LOADING: 'hlsLevelLoading',
  // fired when a level playlist loading finishes - data: { details : levelDetails object, level : id of loaded level, stats : { trequest, tfirst, tload, mtime} }
  LEVEL_LOADED: 'hlsLevelLoaded',
  // fired when a level's details have been updated based on previous details, after it has been loaded - data: { details : levelDetails object, level : id of updated level }
  LEVEL_UPDATED: 'hlsLevelUpdated',
  // fired when a level's PTS information has been updated after parsing a fragment - data: { details : levelDetails object, level : id of updated level, drift: PTS drift observed when parsing last fragment }
  LEVEL_PTS_UPDATED: 'hlsLevelPtsUpdated',
  // fired to notify that audio track lists has been updated - data: { audioTracks : audioTracks }
  AUDIO_TRACKS_UPDATED: 'hlsAudioTracksUpdated',
  // fired when an audio track switching is requested - data: { id : audio track id }
  AUDIO_TRACK_SWITCHING: 'hlsAudioTrackSwitching',
  // fired when an audio track switch actually occurs - data: { id : audio track id }
  AUDIO_TRACK_SWITCHED: 'hlsAudioTrackSwitched',
  // fired when an audio track loading starts - data: { url : audio track URL, id : audio track id }
  AUDIO_TRACK_LOADING: 'hlsAudioTrackLoading',
  // fired when an audio track loading finishes - data: { details : levelDetails object, id : audio track id, stats : { trequest, tfirst, tload, mtime } }
  AUDIO_TRACK_LOADED: 'hlsAudioTrackLoaded',
  // fired to notify that subtitle track lists has been updated - data: { subtitleTracks : subtitleTracks }
  SUBTITLE_TRACKS_UPDATED: 'hlsSubtitleTracksUpdated',
  // fired when an subtitle track switch occurs - data: { id : subtitle track id }
  SUBTITLE_TRACK_SWITCH: 'hlsSubtitleTrackSwitch',
  // fired when a subtitle track loading starts - data: { url : subtitle track URL, id : subtitle track id }
  SUBTITLE_TRACK_LOADING: 'hlsSubtitleTrackLoading',
  // fired when a subtitle track loading finishes - data: { details : levelDetails object, id : subtitle track id, stats : { trequest, tfirst, tload, mtime } }
  SUBTITLE_TRACK_LOADED: 'hlsSubtitleTrackLoaded',
  // fired when a subtitle fragment has been processed - data: { success : boolean, frag : the processed frag }
  SUBTITLE_FRAG_PROCESSED: 'hlsSubtitleFragProcessed',
  // fired when the first timestamp is found - data: { id : demuxer id, initPTS: initPTS, frag : fragment object }
  INIT_PTS_FOUND: 'hlsInitPtsFound',
  // fired when a fragment loading starts - data: { frag : fragment object }
  FRAG_LOADING: 'hlsFragLoading',
  // fired when a fragment loading is progressing - data: { frag : fragment object, { trequest, tfirst, loaded } }
  FRAG_LOAD_PROGRESS: 'hlsFragLoadProgress',
  // Identifier for fragment load aborting for emergency switch down - data: { frag : fragment object }
  FRAG_LOAD_EMERGENCY_ABORTED: 'hlsFragLoadEmergencyAborted',
  // fired when a fragment loading is completed - data: { frag : fragment object, payload : fragment payload, stats : { trequest, tfirst, tload, length } }
  FRAG_LOADED: 'hlsFragLoaded',
  // fired when a fragment has finished decrypting - data: { id : demuxer id, frag: fragment object, payload : fragment payload, stats : { tstart, tdecrypt } }
  FRAG_DECRYPTED: 'hlsFragDecrypted',
  // fired when Init Segment has been extracted from fragment - data: { id : demuxer id, frag: fragment object, moov : moov MP4 box, codecs : codecs found while parsing fragment }
  FRAG_PARSING_INIT_SEGMENT: 'hlsFragParsingInitSegment',
  // fired when parsing sei text is completed - data: { id : demuxer id, frag: fragment object, samples : [ sei samples pes ] }
  FRAG_PARSING_USERDATA: 'hlsFragParsingUserdata',
  // fired when parsing id3 is completed - data: { id : demuxer id, frag: fragment object, samples : [ id3 samples pes ] }
  FRAG_PARSING_METADATA: 'hlsFragParsingMetadata',
  // fired when data have been extracted from fragment - data: { id : demuxer id, frag: fragment object, data1 : moof MP4 box or TS fragments, data2 : mdat MP4 box or null}
  FRAG_PARSING_DATA: 'hlsFragParsingData',
  // fired when fragment parsing is completed - data: { id : demuxer id, frag: fragment object }
  FRAG_PARSED: 'hlsFragParsed',
  // fired when fragment remuxed MP4 boxes have all been appended into SourceBuffer - data: { id : demuxer id, frag : fragment object, stats : { trequest, tfirst, tload, tparsed, tbuffered, length, bwEstimate } }
  FRAG_BUFFERED: 'hlsFragBuffered',
  // fired when fragment matching with current media position is changing - data : { id : demuxer id, frag : fragment object }
  FRAG_CHANGED: 'hlsFragChanged',
  // Identifier for a FPS drop event - data: { curentDropped, currentDecoded, totalDroppedFrames }
  FPS_DROP: 'hlsFpsDrop',
  // triggered when FPS drop triggers auto level capping - data: { level, droppedlevel }
  FPS_DROP_LEVEL_CAPPING: 'hlsFpsDropLevelCapping',
  // Identifier for an error event - data: { type : error type, details : error details, fatal : if true, hls.js cannot/will not try to recover, if false, hls.js will try to recover,other error specific data }
  ERROR: 'hlsError',
  // fired when hls.js instance starts destroying. Different from MEDIA_DETACHED as one could want to detach and reattach a media to the instance of hls.js to handle mid-rolls for example - data: { }
  DESTROYING: 'hlsDestroying',
  // fired when a decrypt key loading starts - data: { frag : fragment object }
  KEY_LOADING: 'hlsKeyLoading',
  // fired when a decrypt key loading is completed - data: { frag : fragment object, payload : key payload, stats : { trequest, tfirst, tload, length } }
  KEY_LOADED: 'hlsKeyLoaded',
  // fired upon stream controller state transitions - data: { previousState, nextState }
  STREAM_STATE_TRANSITION: 'hlsStreamStateTransition'
</code></pre>
<h2 id="å…¼å®¹æ€§">å…¼å®¹æ€§</h2>
<p>æˆªè‡³2018/7ï¼Œå®ƒæ”¯æŒï¼š</p>
<ul>
<li>Chrome for Android 34+</li>
<li>Chrome for Desktop 34+</li>
<li>é€‚ç”¨äºAndroidçš„Firefox 41+</li>
<li>Firefox for Desktop 42+</li>
<li>IE11 + for Windows 8.1+</li>
<li>Edge for Windows 10+</li>
<li>Opera for Desktop</li>
<li>Vivaldi for Desktop</li>
<li>Safari for Mac 8+ï¼ˆæµ‹è¯•ç‰ˆï¼‰</li>
</ul>
<p>è¯·æ³¨æ„ï¼šiOS Safariâ€œMobileâ€ä¸æ”¯æŒMediaSource APIã€‚ç„¶è€Œï¼ŒSafariæµè§ˆå™¨é€šè¿‡çº¯è§†é¢‘â€œæ ‡ç­¾â€æºURLæ”¯æŒå†…ç½®çš„HLSæ”¯æŒã€‚è¯·å‚é˜…ä¸Šé¢çš„ç¤ºä¾‹ï¼ˆå…¥é—¨æŒ‡å—ï¼‰è¿è¡Œé€‚å½“çš„åŠŸèƒ½æ£€æµ‹å¹¶é€‰æ‹©ä½¿ç”¨Hls.jsæˆ–æœ¬æœºå†…ç½®çš„HLSæ”¯æŒã€‚</p>
<p>å½“å¹³å°æ—¢æ²¡æœ‰MediaSourceä¹Ÿæ²¡æœ‰æœ¬åœ°HLSæ”¯æŒæ—¶ï¼Œæ‚¨å°†æ— æ³•æ’­æ”¾HLSã€‚</p>
<h2 id="äº‹ä»¶æµ">äº‹ä»¶æµ</h2>
<p>ç”±äºå†…éƒ¨é€šä¿¡éƒ½æ˜¯åŸºäº EventEmitter æ¥å®ç°ï¼Œé€è¿‡äº‹ä»¶æµï¼Œä½ å¯ä»¥äº†è§£åˆ°ä»£ç è¿è¡Œçš„æ•´ä½“æµç¨‹ã€‚</p>
<p>hls æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://img.colabug.com/2017/11/382f3e53f4e662010efee1fd000feca8.png" alt="image" loading="lazy"></figure>
<p>hlså®é™…ä¼šå…ˆé€šè¿‡ ajaxï¼ˆloader æ˜¯å¯ä»¥å®Œæˆè‡ªå®šä¹‰çš„ï¼‰ è¯·æ±‚ m3u8æ–‡ä»¶ï¼Œç„¶åä¼šè¯»å–åˆ°æ–‡ä»¶çš„åˆ†ç‰‡åˆ—è¡¨ï¼Œä»¥åŠè§†é¢‘çš„ç¼–ç æ ¼å¼ï¼Œæ—¶é•¿ç­‰ã€‚éšåä¼šæŒ‰ç…§é¡ºåº(é seek )å»å¯¹åˆ†ç‰‡è¿›è¡Œè¯·æ±‚ï¼Œè¿™äº›ä¹Ÿæ˜¯é€šè¿‡ ajax è¯·æ±‚äºŒè¿›åˆ¶çš„æ–‡ä»¶ï¼Œç„¶åå€ŸåŠ© Media Source Extensions å°† buffer å†…å®¹è¿›è¡Œåˆæµï¼Œç„¶åç»„æˆä¸€ä¸ªå¯æ’­çš„åª’ä½“èµ„æºæ–‡ä»¶ã€‚</p>
<p>ç”±äºå†…éƒ¨é€šè¿‡è‡ªå®šäº‹ä»¶è¿›è¡Œæ•°æ®ä¼ é€’å’Œæµç¨‹æ§åˆ¶ï¼Œå‚è€ƒä¸‹é¢çš„å›¾ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://img.colabug.com/2017/11/39ccf4fdcc416d91a5f1811b4561927d.png" alt="image" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mysqlæ“ä½œ (äº”) ä¹‹SQL é«˜çº§æ•°æ®æ“ä½œ]]></title>
        <id>https://mengfanfan.github.io/post/mysql-cao-zuo-wu-zhi-sql-gao-ji-shu-ju-cao-zuo/</id>
        <link href="https://mengfanfan.github.io/post/mysql-cao-zuo-wu-zhi-sql-gao-ji-shu-ju-cao-zuo/">
        </link>
        <updated>2018-10-18T08:29:20.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦æ€»ç»“ä¸‹mysqlä¸­çš„ä¸»é”®å†²çªã€è •è™«å¤åˆ¶ã€é™åˆ¶æ•°é‡ã€æŸ¥è¯¢æ¡ä»¶åˆ¤æ–­ã€å­—æ®µåˆ«åç­‰ä½¿ç”¨æ–¹æ³•ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦æ€»ç»“ä¸‹mysqlä¸­çš„ä¸»é”®å†²çªã€è •è™«å¤åˆ¶ã€é™åˆ¶æ•°é‡ã€æŸ¥è¯¢æ¡ä»¶åˆ¤æ–­ã€å­—æ®µåˆ«åç­‰ä½¿ç”¨æ–¹æ³•ã€‚</p>
<!-- more -->
<h1 id="æ•°æ®é«˜çº§æ“ä½œ">æ•°æ®é«˜çº§æ“ä½œ</h1>
<p>æ•°æ®æ“ä½œï¼šå¢åˆ æ”¹æŸ¥</p>
<h2 id="1-æ–°å¢æ•°æ®">1ã€æ–°å¢æ•°æ®</h2>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>insert into è¡¨å [(å­—æ®µåˆ—è¡¨)] values(å€¼åˆ—è¡¨);
</code></pre>
<p>åœ¨æ•°æ®æ’å…¥çš„æ—¶å€™ï¼Œå‡è®¾ä¸»é”®å¯¹åº”çš„å€¼å·²ç»å­˜åœ¨ï¼šæ’å…¥ä¸€å®šä¼šå¤±è´¥ã€‚</p>
<blockquote>
<p>ä¸»é”®å†²çª</p>
</blockquote>
<p>å½“ä¸»é”®å­˜åœ¨å†²çªçš„æ—¶å€™(Duplicate key)ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„è¿›è¡Œå¤„ç†ï¼Œæ›´æ–°å’Œæ›¿æ¢ã€‚</p>
<ul>
<li>
<p>ä¸»é”®å†²çªï¼šæ›´æ–°æ“ä½œ</p>
<pre><code>insert into è¡¨å [(å­—æ®µåˆ—è¡¨:åŒ…å«ä¸»é”®] values(å€¼åˆ—è¡¨) on duplicate key update å­—æ®µ = æ–°å€¼;
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- æ’å…¥æ•°æ®  ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸»é”®
insert into my_calss values(&quot;php1&quot;,&quot;1&quot;);  -- æ’å…¥æˆåŠŸ
insert into my_calss values(&quot;php1&quot;,&quot;2&quot;);  -- æ’å…¥å¤±è´¥ ä¸»é”®å†²çª

-- ä¸»é”®å†²çªï¼šæ›´æ–°
insert into my_class values(&quot;php1&quot;,&quot;2&quot;)
-- å†²çªå¤„ç†
on duplicate key update
-- æ›´æ–°æ•°æ®
room = '2';
</code></pre>
</li>
<li>
<p>ä¸»é”®å†²çªï¼šæ›¿æ¢</p>
<pre><code>replace into è¡¨å [(å­—æ®µåˆ—è¡¨ï¼šåŒ…å«ä¸»é”®)] values(å€¼åˆ—è¡¨);
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- ä¸»é”®å†²çªï¼šæ›¿æ¢
replace into my_calss values(&quot;php1&quot;,&quot;2&quot;);
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> æ²¡æœ‰å†²çªåˆ™æ’å…¥æ•°æ®ã€‚æœ‰å†²çªæ›¿æ¢ã€‚</p>
</li>
</ul>
<blockquote>
<p>è •è™«å¤åˆ¶</p>
</blockquote>
<p>è •è™«å¤åˆ¶ï¼šä»å·²æœ‰çš„æ•°æ®ä¸­å»è·å–æ•°æ®ï¼Œç„¶åå°†æ•°æ®åˆè¿›è¡Œæ–°å¢æ“ä½œï¼šæ•°æ®æˆå€çš„å¢åŠ ã€‚</p>
<p>è¡¨åˆ›å»ºé«˜çº§æ“ä½œï¼šä»å·²æœ‰è¡¨åˆ›å»ºæ–°è¡¨ï¼ˆå¤åˆ¶è¡¨ç»“æ„ï¼‰</p>
<pre><code>create table è¡¨å like æ•°æ®åº“.è¡¨å;
</code></pre>
<pre><code>-- å¤åˆ¶åˆ›å»ºè¡¨: è¡¨ç»“æ„å¤åˆ¶ï¼Œæ•°æ®ä¸å¤åˆ¶
create table my_copy like mg_gbk;
</code></pre>
<p>è •è™«å¤åˆ¶ï¼šå…ˆæŸ¥å‡ºæ•°æ®ï¼Œç„¶åå°†æŸ¥å‡ºçš„æ•°æ®æ–°å¢ä¸€é</p>
<pre><code>insert into è¡¨å[(å­—æ®µåˆ—è¡¨)] select å­—æ®µåˆ—è¡¨/* from æ•°æ®è¡¨å;
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- è •è™«å¤åˆ¶
insert into my_copy select * from my_collate_bin;  -- å¤åˆ¶åˆ«çš„è¡¨
insert into my_copy select * from my_copy;         -- å¤åˆ¶è‡ªå·±çš„è¡¨
</code></pre>
<p>è •è™«å¤åˆ¶çš„æ„ä¹‰ï¼š</p>
<ol>
<li>ä»å·²æœ‰è¡¨æ‹·è´æ•°æ®åˆ°æ–°è¡¨ä¸­</li>
<li>å¯ä»¥è¿…é€Ÿçš„è®©è¡¨ä¸­æ•°æ®è†¨èƒ€åˆ°ä¸€å®šçš„æ•°é‡çº§ï¼Œæµ‹è¯•è¡¨çš„å‹åŠ›ä»¥åŠæ•ˆç‡ã€‚</li>
</ol>
<h2 id="2-æ›´æ–°æ•°æ®é™åˆ¶æ•°é‡">2ã€æ›´æ–°æ•°æ®(é™åˆ¶æ•°é‡)</h2>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>update è¡¨å set å­—æ®µ = å€¼ [where æ¡ä»¶];
</code></pre>
<p>é«˜çº§æ–°å¢è¯­æ³•ï¼š</p>
<pre><code>update è¡¨å set å­—æ®µ = å€¼ [where æ¡ä»¶][limit æ›´æ–°æ•°é‡];
</code></pre>
<p>ä¾‹ï¼šæ›´æ–°éƒ¨åˆ†æ•°æ®</p>
<pre><code>--æ›´æ–°éƒ¨åˆ†aå˜æˆc
update my_copy set name = 'c' where name = 'a' limit 3;
</code></pre>
<h2 id="3-åˆ é™¤æ•°æ®">3ã€åˆ é™¤æ•°æ®</h2>
<p>ä¸æ›´æ–°ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡limitæ¥é™åˆ¶æ•°é‡ã€‚</p>
<pre><code>delete from è¡¨å [where æ¡ä»¶][limit æ•°é‡];
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- åˆ é™¤æ•°æ®ï¼šé™åˆ¶è®°å½•æ•°ä¸º10
delete from my_copy where name = 'b' limit 10;
</code></pre>
<p>åˆ é™¤ï¼šå¦‚æœè¡¨ä¸­å­˜åœ¨ä¸»é”®è‡ªå¢é•¿ï¼Œé‚£ä¹ˆå½“åˆ é™¤åï¼Œè‡ªå¢é•¿ä¸ä¼šè¿˜åŸã€‚</p>
<p>æ€è·¯ï¼šæ•°æ®çš„åˆ é™¤æ˜¯ä¸ä¼šæ”¹å˜è¡¨ç»“æ„ï¼Œåªèƒ½åˆ é™¤è¡¨åé‡å»ºè¡¨ã€‚æ³¨æ„ï¼šè¡¨æ•°æ®ä¼šè¢«æ¸…ç©ºã€‚åªæœ‰è¡¨ç»“æ„ã€‚</p>
<pre><code>truncate è¡¨å;  -- å…ˆåˆ é™¤æ”¹å˜ï¼Œåæ–°å¢æ”¹å˜ã€‚
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- æ¸…ç©ºè¡¨ï¼šé‡ç½®è‡ªå¢é•¿
truncate my_student;
</code></pre>
<h2 id="4-æŸ¥è¯¢æ•°æ®">4ã€æŸ¥è¯¢æ•°æ®</h2>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>select å­—æ®µåˆ—è¡¨/* from è¡¨å [where æ¡ä»¶];
</code></pre>
<p>å®Œæ•´è¯­æ³•ï¼š</p>
<pre><code>select [select é€‰é¡¹] å­—æ®µåˆ—è¡¨[å­—æ®µåˆ«å]/* from æ•°æ®æº [where æ¡ä»¶å­å¥][group byå­å¥][havingå­å¥][order by å­å¥][limit å­å¥;
</code></pre>
<ol>
<li>
<p>select é€‰é¡¹<br>
å«ä¹‰: selectå¯¹æŸ¥å‡ºæ¥çš„ç»“æœçš„å¤„ç†æ–¹å¼</p>
<ul>
<li>allï¼šé»˜è®¤çš„ï¼Œä¿ç•™æ‰€æœ‰çš„ç»“æœã€‚</li>
<li>distinctï¼šå»é‡ï¼ŒæŸ¥å‡ºæ¥çš„ç»“æœï¼Œå°†é‡å¤çš„å»é™¤ï¼ˆæ‰€æœ‰å­—æ®µéƒ½ç›¸åŒï¼‰ æ˜¯å¯¹æ‰€æœ‰çš„å­—æ®µè¿›è¡Œå»é™¤</li>
</ul>
<pre><code>-- selecté€‰é¡¹  ä»¥ä¸‹è¿™ä¿©è¡¨è¾¾çš„æ„æ€ä¸€æ ·
select * from my_copy;
select all * from my_copy;
</code></pre>
<pre><code>-- å»é‡
select distinct * from my_copy;
</code></pre>
</li>
<li>
<p>å­—æ®µåˆ«å</p>
<p>å«ä¹‰ï¼šå½“æ•°æ®è¿›è¡ŒæŸ¥è¯¢å‡ºæ¥çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™åå­—å¹¶ä¸ä¸€å®šå°±æ»¡è¶³éœ€æ±‚(å¤šè¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šæœ‰åŒåå­—æ®µ) éœ€è¦å¯¹å­—æ®µåè¿›è¡Œé‡å‘½åï¼šåˆ«åã€‚</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>å­—æ®µå [as] åˆ«å;  -- åŠ asæˆ–è€…ä¸åŠ aséƒ½è¡Œã€‚
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- å­—æ®µåˆ«å
select
id,
number as å­¦å·,
name as å§“å,
sex æ€§åˆ« from my_student;
</code></pre>
</li>
<li>
<p>æ•°æ®æº</p>
<p>å«ä¹‰ï¼šæ•°æ®çš„æ¥æºï¼Œå…³ç³»å‹æ•°æ®åº“çš„æ¥æºéƒ½æ˜¯æ•°æ®è¡¨ï¼Œæœ¬è´¨ä¸Šåªè¦ä¿è¯æ•°æ®ç±»ä¼¼äºŒç»´è¡¨ï¼Œæœ€ç»ˆéƒ½å¯ä»¥ä½œä¸ºæ•°æ®æºã€‚</p>
<p>æ•°æ®æºåˆ†ä¸ºå¤šç§ï¼šå•è¡¨æ•°æ®æºï¼Œå¤šè¡¨æ•°æ®æºï¼ŒæŸ¥è¯¢è¯­å¥</p>
<p>å•è¡¨æ•°æ®æºï¼š</p>
<pre><code>select * from è¡¨å;
</code></pre>
<p>å¤šè¡¨æ•°æ®æºï¼š</p>
<pre><code>select * from è¡¨å1,è¡¨å2ï¼Œ,...;
</code></pre>
<p>ä»ä¸€å¼ è¡¨ä¸­å–å‡ºä¸€æ¡è®°å½•ï¼Œå»å¦å¤–ä¸€å¼ è¡¨åŒ¹é…æ‰€æœ‰è®°å½•ï¼Œè€Œä¸”å…¨éƒ¨ä¿ç•™ï¼ˆè®°å½•æ•°å’Œå­—æ®µæ•°ï¼‰å°†è¿™ç§ç»“æœç§°ä¸ºï¼šç¬›å¡å°”ç§¯(äº¤å‰è¿æ¥)ã€‚ç¬›å¡å°”ç§¯æ²¡ä»€ä¹ˆç”¨ï¼Œå°½é‡é¿å…ä½¿ç”¨ã€‚</p>
<p>å­æŸ¥è¯¢ï¼šæ•°æ®çš„æ¥æºæ˜¯ä¸€æ¡æŸ¥è¯¢è¯­å¥(æŸ¥è¯¢è¯­å¥çš„ç»“æœæ˜¯äºŒç»´è¡¨)</p>
<pre><code>select * from (select è¯­å¥) as è¡¨å;
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- å­æŸ¥è¯¢
select * from (select * from my_student) as s;
</code></pre>
</li>
<li>
<p>whereå­å¥</p>
<p>whereå­å¥ï¼šç”¨äºåˆ¤æ–­æ•°æ®ï¼Œç­›é€‰æ•°æ®ã€‚</p>
<p>whereå­å¥è¿”å›çš„ç»“æœï¼š0æˆ–è€…1,  0ä»£è¡¨false, 1ä»£è¡¨true;</p>
<pre><code>select * from my_student where 1; -- è¡¨ç¤ºæ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³ï¼Œè¿™ç§è¡¨è¾¾æ˜¯ä¸ºäº†è¯­å¥çš„å®Œæ•´æ€§ã€‚
</code></pre>
<p>åˆ¤æ–­æ¡ä»¶ï¼š</p>
<ul>
<li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š&gt;,&lt;,&gt;=,&lt;=,!=,&lt;&gt;,=,like,between,and,in/ont in</li>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼š&amp;&amp;(and), ||(or), !(not)</li>
</ul>
<p>whereåŸç†ï¼šwhereæ˜¯å”¯ä¸€ä¸€ä¸ªç›´æ¥ä»ç£ç›˜è·å–æ•°æ®çš„æ—¶å€™å°±å¼€å§‹åˆ¤æ–­çš„æ¡ä»¶ï¼šä»ç£ç›˜å–å‡ºä¸€æ¡è®°å½•ï¼Œå¼€å§‹è¿›è¡Œwhereåˆ¤æ–­ï¼Œåˆ¤æ–­çš„ç»“æœï¼Œå¦‚æœæˆç«‹å°±ä¿å­˜åˆ°å†…å­˜ï¼Œå¦‚æœå¤±è´¥å°±ç›´æ¥æ”¾å¼ƒã€‚</p>
<p>æ¡ä»¶æŸ¥è¯¢1ï¼š</p>
<p>ä¾‹ï¼šæ‰¾å‡ºå­¦ç”Ÿidä¸º1,3,5çš„æ•°æ®</p>
<pre><code>-- æ‰¾å‡ºå­¦ç”Ÿidä¸º1,3,5çš„æ•°æ®ï¼Œ ä»¥ä¸‹ä¸¤ç§è¯­å¥ç»“æœä¸€æ ·
select * from my_student where id = 1 || id = 3 || id = 5; -- é€»è¾‘åˆ¤æ–­
select * from my_student where id in(1,3,5); -- è½åœ¨é›†åˆä¸­
</code></pre>
<p>æ¡ä»¶æŸ¥è¯¢2ï¼š</p>
<p>ä¾‹ï¼šæ‰¾èº«é«˜åœ¨180åˆ°190ä¹‹é—´çš„å­¦ç”Ÿ</p>
<pre><code>-- æ‰¾èº«é«˜åœ¨180åˆ°190ä¹‹é—´çš„å­¦ç”Ÿï¼Œä»¥ä¸‹ä¸¤ç§è¯­å¥ç»“æœä¸€æ ·
select * from my_student where height &gt;= 180 and height &lt;= 190;
select * from my_student where height between 180 and 190;
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> betweenæœ¬èº«æ˜¯é—­åŒºé—´ï¼Œbetweenå·¦è¾¹çš„å€¼å¿…é¡»å°äºç­‰äºå³è¾¹çš„å€¼</p>
</li>
<li>
<p>group byå­å¥</p>
<p>group byï¼šåˆ†ç»„çš„æ„æ€ï¼Œæ ¹æ®æŸä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„ï¼ˆç›¸åŒçš„æ”¾ä¸€ç»„ï¼Œä¸åŒçš„åˆ†åˆ°ä¸åŒçš„ç»„ï¼‰ã€‚</p>
<pre><code>-- æ ¹æ®æ€§åˆ«åˆ†ç»„
select * from my_student group by sex;
</code></pre>
<p>åˆ†ç»„çš„æ„æ€ï¼šæ˜¯ä¸ºäº†ç»Ÿè®¡æ•°æ®ï¼ˆæŒ‰ç»„ç»Ÿè®¡ï¼šæŒ‰åˆ†ç»„å­—æ®µè¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼‰</p>
<p>SQLæä¾›äº†ä¸€ç³»åˆ—çš„ç»Ÿè®¡å‡½æ•°</p>
<ul>
<li>count()ï¼šç»Ÿè®¡åˆ†ç»„åçš„è®°å½•æ•°ï¼šæ¯ä¸€ç»„æœ‰å¤šå°‘è®°å½•</li>
<li>max()ï¼šç»Ÿè®¡æ¯ç»„ä¸­æœ€å¤§çš„å€¼</li>
<li>min()ï¼šç»Ÿè®¡æœ€å°å€¼</li>
<li>avg()ï¼šç»Ÿè®¡å¹³å‡å€¼</li>
<li>sum()ï¼šç»Ÿè®¡å’Œ</li>
</ul>
<p>ä¾‹ï¼š</p>
<pre><code>-- åˆ†ç»„ç»Ÿè®¡ï¼šèº«é«˜é«˜çŸ®ï¼Œå¹´é¾„å¹³å‡å’Œæ€»å¹´é¾„
select sex,count(*), max(height),min(height),avg(age),sum(age) from my_student group by sex;
</code></pre>
<p>countå‡½æ•°ï¼šé‡Œé¢å¯ä»¥ä½¿ç”¨ä¸¤ç§å‚æ•°ï¼š* ä»£è¡¨ç»Ÿè®¡è®°å½•ï¼Œå­—æ®µåä»£è¡¨ç»Ÿè®¡å¯¹åº”çš„å­—æ®µ(NULLä¸ç»Ÿè®¡)</p>
<p>åˆ†ç»„ä¼šè‡ªåŠ¨æ’åºï¼šæ ¹æ®åˆ†ç»„å­—æ®µï¼šé»˜è®¤å‡åº</p>
<pre><code>-- ascï¼šå‡åºï¼Œ descï¼šé™åº
group by å­—æ®µ [asc|desc]; -- å¯¹åˆ†ç»„çš„ç»“æœåˆå¹¶ä¹‹åçš„æ•´ä¸ªç»“æœè¿›è¡Œæ’åºã€‚

</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>select sex,count(*), max(height),min(height),avg(age),sum(age) from my_student group by sex desc;
</code></pre>
<p>å¤šå­—æ®µåˆ†ç»„ï¼šå…ˆæ ¹æ®ä¸€ä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå¯¹åˆ†ç»„åçš„ç»“æœå†æ¬¡æŒ‰ç…§å…¶ä»–å­—æ®µè¿›è¡Œåˆ†ç»„ã€‚</p>
<p>ä¾‹ï¼š</p>
<pre><code>-- å¤šå­—æ®µåˆ†ç»„: å…ˆç­çº§ï¼Œåç”·å¥³
select c_id,sex,count(*) from my_student group by c_id,sex; -- å¤šå­—æ®µæ’åº
</code></pre>
<p>æœ‰ä¸€ä¸ªå‡½æ•°ï¼šå¯ä»¥å¯¹åˆ†ç»„çš„ç»“æœä¸­æŸä¸ªå­—æ®µè¿›è¡Œå­—ç¬¦ä¸²è¿æ¥(ä¿ç•™è¯¥ç»„æ‰€æœ‰çš„æŸä¸ªå­—æ®µ)</p>
<pre><code>group_concat(å­—æ®µ);
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- å¤šå­—æ®µåˆ†ç»„: å…ˆç­çº§ï¼Œåç”·å¥³
select c_id,sex,count(*),group_concat(name) from my_student group by c_id,sex; -- å¤šå­—æ®µæ’åº
</code></pre>
<p>å›æº¯ç»Ÿè®¡ï¼šwith rollup; ä»»ä½•ä¸€ä¸ªåˆ†ç»„åéƒ½ä¼šæœ‰ä¸€ä¸ªå°ç»„ï¼Œæœ€åéƒ½éœ€è¦å‘ä¸Šçº§åˆ†ç»„è¿›è¡Œæ±‡æŠ¥ç»Ÿè®¡ï¼Œæ ¹æ®å½“å‰åˆ†ç»„çš„å­—æ®µã€‚è¿™å°±æ˜¯å›æº¯ç»Ÿè®¡ã€‚ç‰¹ç‚¹ï¼šå›æº¯ç»Ÿè®¡çš„æ—¶å€™ä¼šå°†åˆ†ç»„å­—æ®µç½®ç©ºã€‚</p>
<pre><code>-- ç»Ÿè®¡
select c_id,count(*) from my_student group by c_id;

-- å›æº¯ç»Ÿè®¡
select c_id,count(*) from my_student group by c_id with rollop;

-- å¤šå­—æ®µåˆ†ç»„å›æº¯ç»Ÿè®¡
select c_id,sex,count(*),group_concat(name) from my_student group by c_id,sex; -- å¤šå­—æ®µæ’åº
select c_id,sex,count(*),group_concat(name) from my_student group by c_id,sex with rollop; -- å¤šå­—æ®µåˆ†ç»„å›æº¯ç»Ÿè®¡
</code></pre>
<p>å¤šå­—æ®µå›æº¯ï¼šè€ƒè™‘ç¬¬ä¸€å±‚åˆ†ç»„ä¼šæœ‰ä¸€æ¬¡å›æº¯ï¼Œç¬¬äºŒæ¬¡åˆ†ç»„è¦çœ‹ç¬¬ä¸€æ¬¡åˆ†ç»„çš„ç»„æ•°ï¼Œç»„æ•°æ˜¯å¤šå°‘ï¼Œå›æº¯å°±æ˜¯å¤šå°‘ï¼Œç„¶åå†åŠ ä¸Šç¬¬ä¸€å±‚å›æº¯å³å¯ã€‚</p>
</li>
<li>
<p>havingå­å¥</p>
</li>
<li>
<p>order byå­å¥</p>
</li>
<li>
<p>limitå­å¥</p>
</li>
</ol>
<p>å«ä¹‰ï¼šlimitå­å¥æ˜¯ä¸€ç§é™åˆ¶ç»“æœçš„è¯­å¥ï¼šé™åˆ¶æ•°é‡</p>
<p>limitæœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<p>æ–¹æ¡ˆ1ï¼šåªç”¨æ¥é™åˆ¶é•¿åº¦(æ•°æ®é‡)ï¼šlimitæ•°æ®é‡ï¼›</p>
<p>ä¾‹ï¼š</p>
<pre><code>--æŸ¥è¯¢å­¦ç”Ÿï¼šå‰ä¸¤ä¸ª
select * from my_student limit 2;
</code></pre>
<p>æ–¹æ¡ˆ2ï¼šé™åˆ¶èµ·å§‹ä½ç½®ï¼Œé™åˆ¶æ•°é‡ï¼šlimit èµ·å§‹ä½ç½®,é™åˆ¶æ•°;</p>
<p>ä¾‹ï¼š</p>
<pre><code>-- æŸ¥è¯¢å­¦ç”Ÿï¼šå‰ä¸¤ä¸ª
select * from my_student limit 0,2; -- è®°å½•æ•°æ˜¯ä»0å¼€å§‹ç¼–å·
</code></pre>
<p>limit æ–¹æ¡ˆ2ï¼šä¸»è¦ç”¨æ¥å®ç°æ•°æ®çš„åˆ†é¡µï¼šä¸ºç”¨æˆ·èŠ‚çœæ—¶é—´ï¼Œæé«˜æœåŠ¡å™¨çš„å“åº”æ•ˆç‡ï¼Œå‡å°‘èµ„æºçš„æµªè´¹ã€‚</p>
<p>å¯¹äºç”¨æˆ·æ¥è®²ï¼šå¯ä»¥ç‚¹å‡»çš„åˆ†é¡µæŒ‰é’®1,2,3,4</p>
<p>å¯¹äºæœåŠ¡å™¨æ¥è®²ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„é¡µç æ¥è·å–ä¸åŒçš„æ•°æ®ï¼šlimit offset,length;</p>
<p>length:æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®é‡ï¼šåŸºæœ¬ä¸å˜ã€‚</p>
<p>offset: offset=(é¡µç  - 1) * æ¯é¡µæ˜¾ç¤ºé‡</p>
<p>åˆ†é¡µæŸ¥è¯¢è¯­å¥åŠè·å–æ€»è®°å½•æ•°</p>
<pre><code>select SQL_CALC_FOUND_ROWS  * from bloglist order by id limit 2,2;
SELECT FOUND_ROWS();
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mysqlæ“ä½œ (å››) ä¹‹SQL ä¸­æ–‡æ•°æ®é—®é¢˜]]></title>
        <id>https://mengfanfan.github.io/post/mysql-cao-zuo-si-zhi-sql-zhong-wen-shu-ju-wen-ti/</id>
        <link href="https://mengfanfan.github.io/post/mysql-cao-zuo-si-zhi-sql-zhong-wen-shu-ju-wen-ti/">
        </link>
        <updated>2018-10-15T08:28:24.000Z</updated>
        <summary type="html"><![CDATA[<p>SQL é‡Œä¸­æ–‡æ•°æ®é—®é¢˜çš„æœ¬è´¨æ˜¯å­—ç¬¦é›†é—®é¢˜ã€‚è®¡ç®—æœºåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶ï¼Œäººç±»æ›´å¤šçš„æ˜¯è¯†åˆ«ç¬¦å·ï¼›éœ€è¦æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä¸å­—ç¬¦çš„å¯¹åº”å…³ç³»ï¼ˆå­—ç¬¦é›†ï¼‰...</p>
]]></summary>
        <content type="html"><![CDATA[<p>SQL é‡Œä¸­æ–‡æ•°æ®é—®é¢˜çš„æœ¬è´¨æ˜¯å­—ç¬¦é›†é—®é¢˜ã€‚è®¡ç®—æœºåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶ï¼Œäººç±»æ›´å¤šçš„æ˜¯è¯†åˆ«ç¬¦å·ï¼›éœ€è¦æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä¸å­—ç¬¦çš„å¯¹åº”å…³ç³»ï¼ˆå­—ç¬¦é›†ï¼‰...</p>
<!-- more -->
<h2 id="ä¸­æ–‡æ•°æ®é—®é¢˜">ä¸­æ–‡æ•°æ®é—®é¢˜</h2>
<p>ä¸­æ–‡æ•°æ®é—®é¢˜çš„æœ¬è´¨æ˜¯å­—ç¬¦é›†é—®é¢˜ã€‚</p>
<p>è®¡ç®—æœºåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶ï¼Œäººç±»æ›´å¤šçš„æ˜¯è¯†åˆ«ç¬¦å·ï¼›éœ€è¦æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä¸å­—ç¬¦çš„å¯¹åº”å…³ç³»ï¼ˆå­—ç¬¦é›†ï¼‰ï¼›</p>
<p>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨æ’å…¥ä¸­æ–‡æ•°æ®æ²¡æœ‰æˆåŠŸã€‚</p>
<pre><code>--æ’å…¥ä¸­æ–‡æ•°æ®
insert into my_student values(5,'ddd','å¼ è¶Š','çŒ«');  // æŠ¥é”™
</code></pre>
<p>åŸå› ï¼š\xD5\xD5\xD4\xBD ä»£è¡¨çš„æ˜¯â€œå¼ è¶Šâ€åœ¨å½“å‰ç¼–ç ï¼ˆå­—ç¬¦é›†ï¼‰ä¸‹å¯¹åº”çš„äºŒè¿›åˆ¶ç¼–ç è½¬æ¢æˆçš„åå…­è¿›åˆ¶ï¼šä¸¤ä¸ªæ±‰å­— =ã€‹ å››ä¸ªå­—èŠ‚ï¼ˆGBKï¼‰</p>
<p>æŠ¥é”™ï¼šæœåŠ¡å™¨æ²¡æœ‰è¯†åˆ«å¯¹åº”çš„å››ä¸ªå­—èŠ‚ï¼šæœåŠ¡å™¨è®¤ä¸ºæ•°æ®æ˜¯UTF8ï¼Œä¸€ä¸ªæ±‰å­—æœ‰ä¸‰ä¸ªå­—èŠ‚ï¼›è¯»å–ä¸‰ä¸ªå­—èŠ‚è½¬æ¢æˆæ±‰å­—ï¼ˆå¤±è´¥ï¼‰ï¼Œå‰©ä½™çš„å†è¯»ä¸‰ä¸ªå­—èŠ‚ï¼ˆä¸å¤Ÿï¼‰ï¼›æœ€ç»ˆå¤±è´¥ã€‚</p>
<p>æ‰€æœ‰çš„æ•°æ®åº“æœåŠ¡å™¨è®¤ä¸ºï¼ˆè¡¨ç°ï¼‰çš„ä¸€äº›ç‰¹æ€§éƒ½æ˜¯é€šè¿‡æœåŠ¡å™¨ç«¯çš„å˜é‡æ¥ä¿å­˜ï¼›ç³»ç»Ÿå…ˆè¯»å–è‡ªå·±çš„å˜é‡ï¼Œçœ‹çœ‹åº”è¯¥æ€ä¹ˆè¡¨ç°ã€‚</p>
<p>// æŸ¥çœ‹æœåŠ¡å™¨åˆ°åº•è¯†åˆ«å“ªäº›å­—ç¬¦é›†</p>
<pre><code>-- æŸ¥çœ‹æ‰€æœ‰å­—ç¬¦é›†
show character set;
</code></pre>
<p>åŸºæœ¬ä¸Šï¼šæœåŠ¡å™¨æ˜¯ä¸‡èƒ½çš„ï¼Œä»€ä¹ˆå­—ç¬¦é›†éƒ½æ”¯æŒã€‚</p>
<p>// æ—¢ç„¶æœåŠ¡å™¨è¯†åˆ«è¿™ä¹ˆå¤šï¼Œæ€»æœ‰ä¸€ç§æ˜¯æœåŠ¡å™¨é»˜è®¤ä¸å®¢æˆ·ç«¯æ‰“äº¤é“çš„å­—ç¬¦é›†</p>
<pre><code>-- æŸ¥çœ‹æœåŠ¡å™¨é»˜è®¤çš„å¯¹å¤–å¤„ç†çš„å­—ç¬¦é›†
show variables like 'character_set%';
</code></pre>
<p>é—®é¢˜æ ¹æºï¼šå®¢æˆ·ç«¯æ•°æ®åªèƒ½æ˜¯GBKï¼Œè€ŒæœåŠ¡å™¨è®¤ä¸ºæ˜¯UTF8;çŸ›ç›¾äº§å‡ºã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šæ”¹å˜æœåŠ¡å™¨ï¼Œé»˜è®¤çš„æ¥å—å­—ç¬¦é›†ä¸ºGBKï¼›</p>
<pre><code>-- ä¿®æ”¹æœåŠ¡å™¨è®¤ä¸ºçš„å®¢æˆ·ç«¯æ•°æ®çš„å­—ç¬¦é›†ä¸ºGBK
set character_set_client = gbk;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[js åˆ¤æ–­æ•°æ®ç±»å‹å››ç§æ–¹æ³•]]></title>
        <id>https://mengfanfan.github.io/post/js-pan-duan-shu-ju-lei-xing-si-chong-fang-fa/</id>
        <link href="https://mengfanfan.github.io/post/js-pan-duan-shu-ju-lei-xing-si-chong-fang-fa/">
        </link>
        <updated>2018-10-10T08:30:44.000Z</updated>
        <summary type="html"><![CDATA[<p>é‰´äº js æ˜¯æ¾æ•£ç±»å‹çš„ï¼Œå› æ­¤éœ€æœ‰ä¸€ç§æ‰‹æ®µæ¥æ£€æµ‹ç»™å®šå˜é‡çš„æ•°æ®ç±»å‹ã€‚å¯¹æ­¤Js ä¹Ÿæä¾›å¤šç§æ–¹æ³•ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œä¸åŒçš„æ–¹æ³•å¾—åˆ°çš„ç»“æœå‚å·®ä¸é½ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>é‰´äº js æ˜¯æ¾æ•£ç±»å‹çš„ï¼Œå› æ­¤éœ€æœ‰ä¸€ç§æ‰‹æ®µæ¥æ£€æµ‹ç»™å®šå˜é‡çš„æ•°æ®ç±»å‹ã€‚å¯¹æ­¤Js ä¹Ÿæä¾›å¤šç§æ–¹æ³•ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œä¸åŒçš„æ–¹æ³•å¾—åˆ°çš„ç»“æœå‚å·®ä¸é½ã€‚</p>
<!-- more -->
<h2 id="1-typeof">1ã€typeof</h2>
<p>typeof æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå…¶å³ä¾§è·Ÿä¸€ä¸ªä¸€å…ƒè¡¨è¾¾å¼ï¼Œå¹¶è¿”å›è¿™ä¸ªè¡¨è¾¾å¼çš„æ•°æ®ç±»å‹ã€‚è¿”å›çš„ç»“æœç”¨è¯¥ç±»å‹çš„å­—ç¬¦ä¸²(å…¨å°å†™å­—æ¯)å½¢å¼è¡¨ç¤ºï¼ŒåŒ…æ‹¬ä»¥ä¸‹ 7 ç§ï¼šnumberã€booleanã€symbolã€stringã€objectã€undefinedã€function ç­‰ã€‚</p>
<pre><code>   typeof ''; // string æœ‰æ•ˆ
   typeof 1; // number æœ‰æ•ˆ
   typeof Symbol(); // symbol æœ‰æ•ˆ
   typeof true; //boolean æœ‰æ•ˆ
   typeof undefined; //undefined æœ‰æ•ˆ
   typeof null; //object æ— æ•ˆ
   typeof [] ; //object æ— æ•ˆ
   typeof new Function(); // function æœ‰æ•ˆ
   typeof new Date(); //object æ— æ•ˆ
   typeof new RegExp(); //object æ— æ•ˆ
</code></pre>
<h2 id="2-instanceof">2ã€instanceof</h2>
<p>instanceof æ˜¯ç”¨æ¥åˆ¤æ–­ A æ˜¯å¦ä¸º B çš„å®ä¾‹ï¼Œè¡¨è¾¾å¼ä¸ºï¼šA instanceof Bï¼Œå¦‚æœ A æ˜¯ B çš„å®ä¾‹ï¼Œåˆ™è¿”å› true,å¦åˆ™è¿”å› falseã€‚ åœ¨è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šinstanceof æ£€æµ‹çš„æ˜¯åŸå‹</p>
<pre><code>   [] instanceof Array; // true
   {} instanceof Object;// true
   new Date() instanceof Date;// true
    
   function Person(){};
   new Person() instanceof Person;
    
   [] instanceof Object; // true
   new Date() instanceof Object;// true
   new Person instanceof Object;// true
</code></pre>
<h2 id="3-constructor">3ã€constructor</h2>
<p>å¯¹è±¡çš„constructorå±æ€§ç”¨äºè¿”å›åˆ›å»ºè¯¥å¯¹è±¡çš„å‡½æ•°</p>
<pre><code>   var test=new Array();
   
   if (test.constructor==Array)
   {
   document.write(&quot;This is an Array&quot;);
   }
   if (test.constructor==Boolean)
   {
   document.write(&quot;This is a Boolean&quot;);
   }
   if (test.constructor==Date)
   {
   document.write(&quot;This is a Date&quot;);
   }
   if (test.constructor==String)
   {
   document.write(&quot;This is a String&quot;);
   }
</code></pre>
<blockquote>
<p>ç»†èŠ‚é—®é¢˜ï¼š</p>
</blockquote>
<ol>
<li>
<p>null å’Œ undefined æ˜¯æ— æ•ˆçš„å¯¹è±¡ï¼Œå› æ­¤æ˜¯ä¸ä¼šæœ‰ constructor å­˜åœ¨çš„ï¼Œè¿™ä¸¤ç§ç±»å‹çš„æ•°æ®éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼æ¥åˆ¤æ–­ã€‚</p>
</li>
<li>
<p>å‡½æ•°çš„ constructor æ˜¯ä¸ç¨³å®šçš„ï¼Œè¿™ä¸ªä¸»è¦ä½“ç°åœ¨è‡ªå®šä¹‰å¯¹è±¡ä¸Šï¼Œå½“å¼€å‘è€…é‡å†™ prototype åï¼ŒåŸæœ‰çš„ constructor å¼•ç”¨ä¼šä¸¢å¤±ï¼Œconstructor ä¼šé»˜è®¤ä¸º Object</p>
</li>
</ol>
<h2 id="4-tostring">4ã€toString</h2>
<p>toString() æ˜¯ Object çš„åŸå‹æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œé»˜è®¤è¿”å›å½“å‰å¯¹è±¡çš„ [[Class]] ã€‚è¿™æ˜¯ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œå…¶æ ¼å¼ä¸º [object Xxx] ï¼Œå…¶ä¸­ Xxx å°±æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚</p>
<p>å¯¹äº Object å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨ toString()  å°±èƒ½è¿”å› [object Object] ã€‚è€Œå¯¹äºå…¶ä»–å¯¹è±¡ï¼Œåˆ™éœ€è¦é€šè¿‡ call / apply æ¥è°ƒç”¨æ‰èƒ½è¿”å›æ­£ç¡®çš„ç±»å‹ä¿¡æ¯ã€‚</p>
<pre><code>    Object.prototype.toString.call('') ;   // [object String]
    Object.prototype.toString.call(1) ;    // [object Number]
    Object.prototype.toString.call(true) ; // [object Boolean]
    Object.prototype.toString.call(Symbol()); //[object Symbol]
    Object.prototype.toString.call(undefined) ; // [object Undefined]
    Object.prototype.toString.call(null) ; // [object Null]
    Object.prototype.toString.call(new Function()) ; // [object Function]
    Object.prototype.toString.call(new Date()) ; // [object Date]
    Object.prototype.toString.call([]) ; // [object Array]
    Object.prototype.toString.call(new RegExp()) ; // [object RegExp]
    Object.prototype.toString.call(new Error()) ; // [object Error]
    Object.prototype.toString.call(document) ; // [object HTMLDocument]
    Object.prototype.toString.call(window) ; //[object global] window æ˜¯å…¨å±€å¯¹è±¡ global çš„å¼•ç”¨
</code></pre>
<p>æ–¹æ³•ï¼š</p>
<pre><code>export const typeExamine = (value: any) =&gt; {
  return Reflect.apply(Object.prototype.toString, value, [])
    .replace(/^\[object\s(\w+)\]$/, &quot;$1&quot;)
    .toLowerCase();
};
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mysqlæ“ä½œ (ä¸‰) ä¹‹SQL æ•°æ®æ“ä½œ]]></title>
        <id>https://mengfanfan.github.io/post/mysql-cao-zuo-san-zhi-sql-shu-ju-cao-zuo/</id>
        <link href="https://mengfanfan.github.io/post/mysql-cao-zuo-san-zhi-sql-shu-ju-cao-zuo/">
        </link>
        <updated>2018-10-04T08:26:26.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦ä»‹ç»mysqlä¸­çš„æ•°æ®æ“ä½œï¼Œä¸€äº›åŸºç¡€çš„å¢åˆ æ”¹æŸ¥ï¼Œå¸¸è§„çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸€èµ·æ¥çœ‹å§ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦ä»‹ç»mysqlä¸­çš„æ•°æ®æ“ä½œï¼Œä¸€äº›åŸºç¡€çš„å¢åˆ æ”¹æŸ¥ï¼Œå¸¸è§„çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸€èµ·æ¥çœ‹å§ã€‚</p>
<!-- more -->
<h2 id="sql-æ•°æ®æ“ä½œ">SQL æ•°æ®æ“ä½œ</h2>
<blockquote>
<p>æ–°å¢æ•°æ®</p>
</blockquote>
<p>æœ‰ä¸¤ç§æ–¹æ¡ˆ</p>
<p><strong>æ–¹æ¡ˆ1ï¼š</strong> ç»™å…¨è¡¨å­—æ®µæ’å…¥æ•°æ®ï¼Œä¸éœ€è¦æŒ‡å®šå­—æ®µåˆ—è¡¨</p>
<p>è¦æ±‚ï¼šè¦æ±‚æ•°æ®çš„å€¼å‡ºç°çš„é¡ºåºå¿…é¡»ä¸è¡¨ä¸­è®¾è®¡çš„å­—æ®µå‡ºç°çš„é¡ºåºä¸€è‡´ï¼Œå‡¡äº‹éæ•°å€¼æ•°æ®ï¼Œéƒ½éœ€è¦ä½¿ç”¨å¼•å·ï¼ˆå»ºè®®æ˜¯å•å¼•å·ï¼‰åŒ…è£¹ã€‚</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>insert into è¡¨å values(å€¼åˆ—è¡¨)[,å€¼åˆ—è¡¨]; -- å¯ä»¥ä¸€æ¬¡æ€§æ’å…¥å¤šæ¡æ•°æ®
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- æ’å…¥æ•°æ®
insert into my_student values(1,'inst111','jim','male'),((2,'inst222','jsse','male');  
</code></pre>
<p><strong>æ–¹æ¡ˆ2ï¼š</strong> ç»™éƒ¨åˆ†å­—æ®µæ’å…¥æ•°æ®ï¼Œéœ€è¦é€‰å®šå­—æ®µåˆ—è¡¨ï¼Œå­—æ®µåˆ—è¡¨å‡ºç°é¡ºåºä¸å­—æ®µçš„é¡ºåºæ— å…³ï¼›ä½†æ˜¯å€¼åˆ—è¡¨çš„é¡ºåºå¿…é¡»ä¸é€‰å®šçš„å­—æ®µçš„é¡ºåºä¸€è‡´ã€‚</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>insert into è¡¨å (å­—æ®µåˆ—è¡¨) values(å€¼åˆ—è¡¨)[,å€¼åˆ—è¡¨]; 
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- æ’å…¥æ•°æ®ï¼šæŒ‡å®šå­—æ®µåˆ—è¡¨
insert into my_student (number,sex,name,id) values
('ictast001','male','tom',3),
('ictast002','male','lily',4);
</code></pre>
<blockquote>
<p>æŸ¥çœ‹æ•°æ®</p>
</blockquote>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>select */å­—æ®µåˆ—è¡¨ from è¡¨å [where æ¡ä»¶];
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®
select * from my_student;

-- æŸ¥çœ‹æŒ‡å®šå­—æ®µï¼ŒæŒ‡å®šæ¡ä»¶æ•°æ®
select id,number,sex from my_student where id=1; -- æŸ¥çœ‹æ»¡è¶³idä¸º1çš„æ•°æ®
</code></pre>
<blockquote>
<p>æ›´æ–°æ•°æ®</p>
</blockquote>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>update è¡¨å set å­—æ®µ = å€¼ [where æ¡ä»¶]; -- å»ºè®®éƒ½æœ‰whereï¼Œè¦ä¸åŠ æ›´æ–°å…¨éƒ¨
</code></pre>
<p>ä¾‹ï¼š<br>
æœ¬ç¯‡ä¸»è¦ä»‹ç»mysqlä¸­çš„æ•°æ®æ“ä½œï¼Œä¸€äº›åŸºç¡€çš„å¢åˆ æ”¹æŸ¥ï¼Œå¸¸è§„çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸€èµ·æ¥çœ‹å§ã€‚</p>
<!-- more -->
<pre><code>-- æ›´æ–°æ•°æ®
update my_student set sex = 'female' where name = 'jim';
</code></pre>
<p>åˆå§‹<br>
æ›´æ–°ä¸ä¸€å®šä¼šæˆåŠŸï¼Œå¦‚æ²¡æœ‰çœŸæ­£è¦æ›´æ–°çš„æ•°æ®ã€‚å¦‚æœè¯¥æ•°æ®çš„åˆå§‹å€¼ä¸º1ï¼Œæ›´æ–°è¯¥æ•°æ®è¿˜ä¸º1ï¼Œé‚£å¹¶æ²¡æœ‰çœŸæ­£æ›´æ–°è¯¥æ•°æ®ã€‚åˆ¤æ–­æ•°æ®æ›´æ–°æˆåŠŸï¼Œéœ€è¦çœ‹å—å½±å“çš„è¡Œæ•°ã€‚</p>
<blockquote>
<p>åˆ é™¤æ•°æ®</p>
</blockquote>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>delete from è¡¨å [where æ¡ä»¶];
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- åˆ é™¤æ•°æ®
delete from my_student where sex = 'male';
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> åˆ é™¤ä¸å¯é€†ï¼Œè°¨æ…åˆ é™¤ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mysqlæ“ä½œ (äºŒ) ä¹‹SQL è¡¨æ“ä½œï¼ˆå­—æ®µï¼‰]]></title>
        <id>https://mengfanfan.github.io/post/mysql-cao-zuo-er-zhi-sql-biao-cao-zuo-zi-duan/</id>
        <link href="https://mengfanfan.github.io/post/mysql-cao-zuo-er-zhi-sql-biao-cao-zuo-zi-duan/">
        </link>
        <updated>2018-09-23T08:25:27.000Z</updated>
        <content type="html"><![CDATA[<h2 id="sql-è¡¨æ“ä½œå­—æ®µ">SQL è¡¨æ“ä½œï¼ˆå­—æ®µï¼‰</h2>
<blockquote>
<p>æ–°å¢æ•°æ®è¡¨</p>
</blockquote>
<p>åŸºæœ¬è¯­æ³•:</p>
<pre><code>create table [if not exists] è¡¨å(
å­—æ®µåå­— æ•°æ®ç±»å‹,
å­—æ®µåå­— æ•°æ®ç±»å‹       -- æœ€åä¸€è¡Œä¸éœ€è¦é€—å·
)[è¡¨é€‰é¡¹];
</code></pre>
<p><strong>è§£é‡Šï¼š</strong></p>
<p>if not existsï¼šå¦‚æœè¡¨åä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåˆ›å»ºï¼Œå¦åˆ™ä¸æ‰§è¡Œåˆ›å»ºä»£ç ï¼ˆæ£€æŸ¥åŠŸèƒ½ï¼‰</p>
<p>è¡¨é€‰é¡¹ï¼šæ§åˆ¶è¡¨çš„è¡¨ç°</p>
<p>å­—ç¬¦é›†ï¼šcharset/charset set å…·ä½“å­—ç¬¦é›†;  -- ä¿è¯è¡¨ä¸­æ•°æ®å­˜å‚¨çš„å­—ç¬¦é›†</p>
<p>æ ¡å¯¹é›†ï¼šcollate å…·ä½“æ ¡å¯¹é›†ï¼›</p>
<p>å­˜å‚¨å¼•æ“ï¼šengine å…·ä½“çš„å­˜å‚¨å¼•æ“ï¼ˆinnodb å’Œ myisamï¼‰</p>
<p>ä»»ä½•ä¸€ä¸ªè¡¨çš„è®¾è®¡éƒ½å¿…é¡»æŒ‡å®šæ•°æ®åº“ã€‚</p>
<ol>
<li>
<p>æ–¹æ¡ˆ1ï¼š:æ˜¾ç¤ºçš„æŒ‡å®šè¡¨æ‰€å±çš„æ•°æ®åº“</p>
<pre><code>create tabe æ•°æ®åº“å.è¡¨å();  -- å°†å½“æœŸæ•°æ®è¡¨åˆ›å»ºåˆ°æŒ‡å®šçš„æ•°æ®åº“ä¸­
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code> -- åˆ›å»ºæ•°æ®è¡¨
 create table if not exists mydatabase.student(  -- æ˜¾ç¤ºçš„studentè¡¨æ”¾åˆ°mydatabaseæ•°æ®åº“ä¸‹
    name varchar(10),
    gender varchar(12),
    number int
    age int
 )charset utf8;
</code></pre>
</li>
<li>
<p>æ–¹æ¡ˆ2ï¼šéšå¼çš„æŒ‡å®šè¡¨æ‰€å±æ•°æ®åº“ï¼šå…ˆè¿›å…¥åˆ°æŸä¸ªæ•°æ®åº“ç¯å¢ƒï¼Œç„¶åè¿™æ ·åˆ›å»ºçš„è¡¨è‡ªåŠ¨å½’å±åˆ°æŸä¸ªæŒ‡å®šçš„æ•°æ®åº“ã€‚</p>
<p>è¿›å…¥æ•°æ®åº“ç¯å¢ƒï¼šuse æ•°æ®åº“åå­—;</p>
<p>ä¾‹ï¼š</p>
<pre><code>-- åˆ›å»ºæ•°æ®è¡¨
-- è¿›å…¥æ•°æ®åº“
use mydatabase;

-- åˆ›å»ºè¡¨
create table class(
name varchar(10),
room varchar(10)
)charset utf8;
</code></pre>
<p>å½“åˆ›å»ºæ•°æ®è¡¨çš„SQLæŒ‡ä»¤æ‰§è¡Œä¹‹åï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>æŒ‡å®šæ•°æ®åº“ä¸‹å·²å­˜åœ¨å¯¹åº”çš„è¡¨</li>
<li>åœ¨æ•°æ®åº“å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä¼šäº§ç”Ÿå¯¹åº”è¡¨çš„æ•°æ®ç»“æ„æ–‡ä»¶ï¼ˆè·Ÿå­˜å‚¨å¼•æ“æœ‰å…³ç³»ï¼‰</li>
</ul>
</li>
</ol>
<blockquote>
<p>æŸ¥çœ‹æ•°æ®è¡¨</p>
</blockquote>
<ol>
<li>
<p>æŸ¥çœ‹æ‰€æœ‰è¡¨</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>show tables;
</code></pre>
</li>
<li>
<p>æŸ¥çœ‹éƒ¨åˆ†è¡¨ï¼šæ¨¡ç³ŠåŒ¹é…</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>show tables like 'pattern';
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>--æŸ¥çœ‹ä»¥sç»“å°¾çš„è¡¨
show table like '%s';
</code></pre>
</li>
<li>
<p>æŸ¥çœ‹è¡¨åˆ›å»ºè¯­å¥</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>show create table è¡¨å;
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>--  æŸ¥çœ‹è¡¨åˆ›å»ºè¯­å¥
show create table student\g  -- \g ç­‰åŒäº ;
show create table student\G  -- å°†æŸ¥åˆ°çš„ç»“æ„æ—‹è½¬90åº¦å˜æˆçºµå‘ã€‚
</code></pre>
</li>
<li>
<p>æŸ¥çœ‹è¡¨ç»“æ„ï¼šæŸ¥çœ‹è¡¨ä¸­çš„å­—æ®µä¿¡æ¯</p>
</li>
</ol>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>~~~
desc/describe/show columns from è¡¨å;
~~~

ä¾‹ï¼š

~~~
-- æŸ¥çœ‹è¡¨ç»“æ„
desc calss;
describe calss;
show columns from class;  // ä»¥ä¸Šä¸‰ç§è¯­æ³•è¡¨è¾¾çš„æ„æ€éƒ½ä¸€æ ·
~~~
</code></pre>
<blockquote>
<p>ä¿®æ”¹æ•°æ®è¡¨</p>
</blockquote>
<p>è¡¨æœ¬èº«å­˜åœ¨ï¼Œè¿˜åŒ…å«å­—æ®µï¼šè¡¨çš„ä¿®æ”¹åŒ…å«ä¸¤éƒ¨åˆ†ï¼šä¿®æ”¹è¡¨æœ¬èº«å’Œä¿®æ”¹å­—æ®µã€‚</p>
<ol>
<li>ä¿®æ”¹è¡¨æœ¬èº«</li>
</ol>
<p>è¡¨æœ¬èº«å¯ä»¥ä¿®æ”¹ï¼šè¡¨åå’Œè¡¨é€‰é¡¹</p>
<ul>
<li>
<p>ä¿®æ”¹è¡¨åï¼š</p>
<pre><code>rename table è€è¡¨å to æ–°è¡¨å;
</code></pre>
</li>
<li>
<p>ä¿®æ”¹è¡¨é€‰é¡¹ï¼šå­—ç¬¦é›†ã€æ ¡å¯¹é›†å’Œå­˜å‚¨å¼•æ“</p>
<pre><code>alter table è¡¨å è¡¨é€‰é¡¹ [=] å€¼;
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- ä¿®æ”¹è¡¨é€‰é¡¹ï¼šå­—ç¬¦é›†
alter table my_student clarset = GBK;
</code></pre>
</li>
</ul>
<ol start="2">
<li>ä¿®æ”¹å­—æ®µ</li>
</ol>
<p>å­—æ®µæ“ä½œå¾ˆå¤šï¼šæ–°å¢ï¼Œä¿®æ”¹ï¼Œé‡åï¼Œåˆ é™¤</p>
<ul>
<li>
<p>æ–°å¢å­—æ®µï¼š</p>
<pre><code>alter table è¡¨å add [column] å­—æ®µå æ•°æ®ç±»å‹ [åˆ—å±æ€§][ä½ç½®];

ä½ç½®ï¼šå­—æ®µåå¯ä»¥å­˜æ”¾è¡¨ä¸­ä»»æ„ä½ç½®
    firstï¼šç¬¬ä¸€ä¸ªä½ç½®
    afterï¼šåœ¨å“ªä¸ªå­—æ®µä¹‹åï¼šafterå­—æ®µåï¼›é»˜è®¤çš„æ˜¯åœ¨æœ€åä¸€ä¸ªå­—æ®µä¹‹åã€‚
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- ç»™å­¦ç”Ÿè¡¨å¢åŠ IDæ”¾åœ¨ç¬¬ä¸€ä¸ªä½ç½®
alter table my_student add column id int first;
</code></pre>
</li>
<li>
<p>ä¿®æ”¹å­—æ®µï¼šä¿®æ”¹é€šå¸¸æ˜¯ä¿®æ”¹å±æ€§æˆ–è€…æ•°æ®ç±»å‹</p>
<pre><code>alter table è¡¨å modify å­—æ®µå æ•°æ®ç±»å‹ [å±æ€§][ä½ç½®];
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- å°†å­¦ç”Ÿè¡¨ä¸­çš„numberå­¦å·å­—æ®µå˜æˆå›ºå®šé•¿åº¦ï¼Œä¸”æ”¾åˆ°ç¬¬äºŒä½ï¼ˆidä¹‹åï¼‰
alter table my_student modify number char(10) after id;
</code></pre>
</li>
<li>
<p>é‡å‘½åå­—æ®µ</p>
<pre><code>alter table è¡¨å change æ—§å­—æ®µ æ–°å­—æ®µ æ•°æ®ç±»å‹ [å±æ€§][ä½ç½®];
</code></pre>
<p>ä¾‹ï¼š</p>
<pre><code>-- ä¿®æ”¹å­¦ç”Ÿè¡¨ä¸­çš„ genderå­—æ®µä¸ºsex
alter table my_student change gender sex varchar(10);
</code></pre>
</li>
<li>
<p>åˆ é™¤å­—æ®µ</p>
<pre><code>alter table è¡¨å drop å­—æ®µå;
</code></pre>
</li>
</ul>
<p><strong>å°å¿ƒï¼š</strong>  å¦‚æœè¡¨ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œé‚£ä¹ˆåˆ é™¤å­—æ®µä¼šæ¸…ç©ºè¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®ï¼ˆä¸å¯é€†ï¼‰</p>
<blockquote>
<p>åˆ é™¤æ•°æ®è¡¨</p>
</blockquote>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<pre><code>drop table è¡¨å1,è¡¨å2;  --å¯ä»¥ä¸€æ¬¡æ€§åˆ é™¤å¤šå¼ è¡¨
</code></pre>
<p>å½“åˆ é™¤æ•°æ®è¡¨çš„æŒ‡ä»¤æ‰§è¡Œåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>åœ¨è¡¨ç©ºé—´ä¸­ï¼Œæ²¡æœ‰äº†æŒ‡å®šçš„è¡¨ï¼ˆæ•°æ®ä¹Ÿæ²¡æœ‰äº†ï¼‰</li>
<li>åœ¨æ•°æ®åº“å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œè¡¨å¯¹åº”çš„æ–‡ä»¶ï¼ˆä¸å­˜å‚¨å¼•æ“æœ‰å…³ï¼‰ä¹Ÿåˆ é™¤äº†ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šåˆ é™¤æœ‰å±é™©æ“ä½œéœ€è°¨æ…ï¼ˆä¸å¯é€†ï¼‰</p>
]]></content>
    </entry>
</feed>